namespace UglyToad.PdfPig.Tests.Geometry
{
    using PdfPig.Core;
    using PdfPig.Geometry;
    using System.Collections.Generic;
    using Xunit;

    public class PdfLineTests
    {
        private static readonly DoubleComparer DoubleComparer = new DoubleComparer(3);
        private static readonly DoubleComparer PreciseDoubleComparer = new DoubleComparer(6);
        private static readonly PointComparer PointComparer = new PointComparer(DoubleComparer);

        [Fact]
        public void OriginIsZero()
        {
            var origin = new PdfLine();

            Assert.Equal(0, origin.Point1.X);
            Assert.Equal(0, origin.Point1.Y);
            Assert.Equal(0, origin.Point2.X);
            Assert.Equal(0, origin.Point2.Y);
        }

        public static IEnumerable<object[]> LengthData => new[]
        {
            new object[] { new double[] { 190.8371004778927, 195.5590603079521, 835.5537688584745, 90.50342829217284 }, new double[] { 653.2199233841478 } },
            new object[] { new double[] { 186.1201280032434, 466.0112253745279, 103.02506253603583, 732.7907411987937 }, new double[] { 279.42100845933044 } },
            new object[] { new double[] { 695.6713774488983, 473.35313064465043, 891.8249539312077, 471.3261715675039 }, new double[] { 196.1640490250485 } },
            new object[] { new double[] { 245.61796166092697, 417.5772082647122, 310.7968924983532, 390.2894655810555 }, new double[] { 70.66055424265687 } },
            new object[] { new double[] { 904.8925597320072, 170.0378813647443, 729.7456407212313, 563.0690257348186 }, new double[] { 430.290510799178 } },
            new object[] { new double[] { 103.69012119895538, 193.34571872543916, 111.74935749953441, 900.9441932245975 }, new double[] { 707.6443685943418 } },
            new object[] { new double[] { 825.8681573033824, 588.4135011435201, 418.2595797323617, 699.9881960129857 }, new double[] { 422.60343709521004 } },
            new object[] { new double[] { 157.37650392040703, 891.7310493860206, 484.7166518460643, 402.2060091124232 }, new double[] { 588.8856743875319 } },
            new object[] { new double[] { 299.14222909979225, 638.96873623182, 14.75546276665618, 838.5092651161324 }, new double[] { 347.40790942759037 } },
            new object[] { new double[] { 370.7722431151812, 265.1506662936315, 2.667747143338728, 168.02703094991122 }, new double[] { 380.7018787674473 } },
            new object[] { new double[] { 814.6714758631268, 270.2656407106455, 830.0276584983447, 712.2448634553435 }, new double[] { 442.2459108721454 } },
            new object[] { new double[] { 481.44218635329383, 10.01987995763043, 107.80183570357438, 187.20422133755756 }, new double[] { 413.5231583162953 } },
            new object[] { new double[] { 551.9344826964319, 381.09882406841, 101.64836559722168, 115.76575575650038 }, new double[] { 522.6463664774645 } },
            new object[] { new double[] { 121.82216264459255, 113.63262078808812, 453.36582182928163, 200.43826377511022 }, new double[] { 342.71915265996387 } },
            new object[] { new double[] { 565.5586097130778, 364.9452683882004, 684.0498690329932, 690.1818117835786 }, new double[] { 346.1487941550471 } },
            new object[] { new double[] { 697.9367978619123, 883.9046526611218, 774.41712851374, 278.1286157995213 }, new double[] { 610.5848407980336 } },
            new object[] { new double[] { 238.79356839355458, 822.0611612623475, 867.1510615215013, 170.66556045357305 }, new double[] { 905.0687089514596 } },
            new object[] { new double[] { 512.7921689861437, 194.80962312949833, 934.0235366700005, 304.0278809274004 }, new double[] { 435.16030719405177 } },
            new object[] { new double[] { 378.61916213668155, 157.3050943441656, 969.9309333193792, 234.8867585351374 }, new double[] { 596.3795145357188 } },
            new object[] { new double[] { 737.1758351156666, 46.35675591104116, 768.1674878711214, 498.87124837530706 }, new double[] { 453.5745235688473 } },
            new object[] { new double[] { 101.36428548561626, 59.44990596498012, 276.69473812807024, 137.64935970681046 }, new double[] { 191.97896288220866 } },
            new object[] { new double[] { 743.5258306065436, 921.564801193344, 192.97031512030216, 408.8678852251345 }, new double[] { 752.3094464883677 } },
            new object[] { new double[] { 471.0577672814765, 27.088862708520843, 784.6648111116209, 134.9885699569563 }, new double[] { 331.65000341350844 } },
            new object[] { new double[] { 929.1244848744249, 663.4442136188952, 331.9145289570389, 94.80387100429132 }, new double[] { 824.6281408584722 } },
            new object[] { new double[] { 505.80057478119835, 698.1765765874327, 233.38766948344724, 84.98722663992497 }, new double[] { 670.9768772929575 } },
            new object[] { new double[] { 806.369302725176, 230.566437922603, 602.430243108747, 792.1865701899809 }, new double[] { 597.5017263617407 } },
            new object[] { new double[] { 264.1606892577477, 995.8172494421481, 794.0334091199198, 198.62980429025077 }, new double[] { 957.2214592046843 } },
            new object[] { new double[] { 472.04192378853895, 162.67346194887645, 564.1517831158918, 14.043503321895855 }, new double[] { 174.85734410302214 } },
            new object[] { new double[] { 612.659731471288, 612.9370506293178, 797.6205762310365, 17.340954361677706 }, new double[] { 623.6547313886841 } },
            new object[] { new double[] { 641.6670982629627, 903.3231885534251, 214.28748308783275, 482.85643579571826 }, new double[] { 599.5378433775909 } },
            new object[] { new double[] { 709.5781899278792, 192.4269693358448, 602.5254664666547, 548.1811408212083 }, new double[] { 371.51220185843533 } },
            new object[] { new double[] { 222.50066070753272, 493.35475220654155, 821.0200479330013, 137.34330664318728 }, new double[] { 696.3975920814629 } },
            new object[] { new double[] { 485.99726695618784, 850.8173850458037, 791.9771001040855, 308.63594537965855 }, new double[] { 622.5627452808825 } },
            new object[] { new double[] { 299.4805833576227, 282.2495959995641, 977.9264025437416, 234.87623995357555 }, new double[] { 680.0977609389578 } },
            new object[] { new double[] { 618.9772189353536, 454.84016878739385, 590.423864770772, 803.1933349207312 }, new double[] { 349.5214190706609 } },
            new object[] { new double[] { 274.5180110294834, 192.66459338152663, 798.3177911789427, 28.490631069587934 }, new double[] { 548.9255865650861 } },
            new object[] { new double[] { 704.4996092428436, 767.1897571734477, 411.6465294270052, 581.1388872031387 }, new double[] { 346.9551160803521 } },
            new object[] { new double[] { 389.7431457194177, 709.1476391506876, 499.13513770357787, 963.7268373170796 }, new double[] { 277.08694673207833 } },
            new object[] { new double[] { 320.03803277377887, 160.2486130669861, 517.3040340006013, 200.74401200369783 }, new double[] { 201.37962303834055 } },
            new object[] { new double[] { 739.2695984980817, 622.3527391356477, 4.065170618754221, 797.1529250703437 }, new double[] { 755.6987864064448 } },
            new object[] { new double[] { 860.2958333508416, 333.5974936543332, 136.96530096286241, 95.00987753984968 }, new double[] { 761.6633834233266 } },
            new object[] { new double[] { 282.15081529831656, 866.7886695252895, 156.7057946463838, 906.0479845603302 }, new double[] { 131.44484403499595 } },
            new object[] { new double[] { 179.51017318735396, 196.10086192847643, 180.56669634209433, 523.0188790687166 }, new double[] { 326.9197243545927 } },
            new object[] { new double[] { 86.74308100085571, 683.0151475437317, 308.0705994959031, 486.3235615192121 }, new double[] { 296.09702878620135 } },
            new object[] { new double[] { 240.18220283297785, 492.5911405930761, 936.1933362976389, 762.1937366884123 }, new double[] { 746.4027449896652 } },
            new object[] { new double[] { 702.0804791819841, 819.9799731078089, 780.0695986494812, 483.9762626961529 }, new double[] { 344.9359305229241 } },
            new object[] { new double[] { 246.34282694670284, 54.58854476863384, 979.2801420594898, 73.00838507308593 }, new double[] { 733.1687380143688 } },
            new object[] { new double[] { 227.3856855531745, 505.5842483079985, 573.4095211687335, 284.8833891099237 }, new double[] { 410.41608650840163 } },
            new object[] { new double[] { 954.8592611427414, 287.6085707479722, 674.852769572892, 453.6053257067626 }, new double[] { 325.5127616209614 } },
            new object[] { new double[] { 640.469141584807, 710.4327102718037, 879.194433659361, 992.2177047203062 }, new double[] { 369.3136176374001 } },
            new object[] { new double[] { 880.5998080157741, 610.6931993086068, 395.1760263198596, 34.07353773225496 }, new double[] { 753.7416546485867 } },
            new object[] { new double[] { 961.9326903213472, 151.83245734410832, 696.0947897205162, 815.95317451048 }, new double[] { 715.3503451913847 } },
            new object[] { new double[] { 3.9155467688531953, 546.2132751275869, 830.7813781223891, 246.18213110470188 }, new double[] { 879.6168429740618 } },
            new object[] { new double[] { 444.27319450891775, 476.81031830207996, 991.4111726026024, 191.1808286420854 }, new double[] { 617.2067501541718 } },
            new object[] { new double[] { 969.0765570919632, 577.138809775923, 474.36598397698936, 241.1621349225992 }, new double[] { 598.0124389987569 } },
            new object[] { new double[] { 635.9692020912202, 290.25881884054616, 0.31074712311085495, 648.2140501777134 }, new double[] { 729.5160169688453 } },
            new object[] { new double[] { 222.53569185763, 629.2774387978521, 153.98871292117389, 943.8303536935576 }, new double[] { 321.9351248166312 } },
            new object[] { new double[] { 481.5920876489339, 682.7603288254961, 740.5384245491173, 409.66097176520435 }, new double[] { 376.3462026123925 } },
            new object[] { new double[] { 689.2587908005099, 624.3534297021754, 738.5826055579923, 63.19313204361565 }, new double[] { 563.3238130688901 } },
            new object[] { new double[] { 391.2948976479508, 426.4913714964327, 98.2965898932392, 102.97919909317011 }, new double[] { 436.47237488780775 } },
            new object[] { new double[] { 272.4261298230215, 632.3818950634542, 448.0360178188617, 446.7872791972879 }, new double[] { 255.5077184752378 } },
            new object[] { new double[] { 639.4775608981882, 510.8129821281046, 672.819698855375, 16.107654192704324 }, new double[] { 495.82765115635493 } },
            new object[] { new double[] { 555.2713222174989, 620.2366193858473, 69.59371657908686, 644.5422920786804 }, new double[] { 486.28541243153904 } },
            new object[] { new double[] { 368.3203329252472, 338.3532939109004, 367.6980529669451, 857.5734223911275 }, new double[] { 519.2205013781428 } },
            new object[] { new double[] { 83.55589164996024, 837.0224269335133, 42.15500568585606, 482.2949465077161 }, new double[] { 357.135294710348 } },
            new object[] { new double[] { 558.5402675219982, 182.94999465379425, 270.09194546817173, 606.6569704515929 }, new double[] { 512.571981125953 } },
            new object[] { new double[] { 166.83078932985129, 671.1399465888945, 50.8449008448667, 29.777972103999907 }, new double[] { 651.7652250947529 } },
            new object[] { new double[] { 261.387026674993, 358.4967960065069, 536.4045942380387, 278.1298688111906 }, new double[] { 286.5196423547811 } },
            new object[] { new double[] { 374.62458475227953, 967.5325872758127, 299.75874172702646, 16.553397039215657 }, new double[] { 953.9215453667748 } },
            new object[] { new double[] { 589.1367883498552, 975.1255761233041, 191.12961067443834, 315.36273606201826 }, new double[] { 770.5171760622113 } },
            new object[] { new double[] { 943.0156575766946, 403.70697682180844, 514.2409660515976, 32.89430939891413 }, new double[] { 566.8772092911516 } },
            new object[] { new double[] { 998.2752186080078, 2.5096192356099944, 554.3874096707293, 480.41835511738594 }, new double[] { 652.252364315573 } },
            new object[] { new double[] { 849.2755177371154, 825.4003090335679, 647.4340814514295, 821.7265401348636 }, new double[] { 201.87486713256226 } },
            new object[] { new double[] { 180.22219935431826, 437.2105889203756, 623.2243804707304, 166.6490965066021 }, new double[] { 519.0900246114029 } },
            new object[] { new double[] { 666.3729082168118, 219.7312638919139, 759.3260890650042, 700.5985723464253 }, new double[] { 489.76898857531086 } },
            new object[] { new double[] { 457.2382866577055, 826.9383730065374, 177.24350181710037, 565.8131907147441 }, new double[] { 382.8621688870017 } },
            new object[] { new double[] { 403.22893472891053, 185.68424293512587, 230.57271512401834, 238.38084925272773 }, new double[] { 180.51898095669904 } },
            new object[] { new double[] { 251.02320270998558, 367.52402970990903, 469.67191166145204, 622.6472801823553 }, new double[] { 335.99870663109647 } },
            new object[] { new double[] { 457.96968836727405, 241.26763693176633, 775.6178440268818, 510.4350522539501 }, new double[] { 416.35495465428943 } },
            new object[] { new double[] { 166.69177076833296, 984.2463387788379, 136.29637813839923, 67.71293599054162 }, new double[] { 917.0372720450468 } },
            new object[] { new double[] { 259.1265915823515, 95.6956800986336, 646.0319384933817, 575.6226645143806 }, new double[] { 616.4622112009279 } },
            new object[] { new double[] { 489.51563418877953, 530.3793652036015, 539.5577872453925, 453.4419047446674 }, new double[] { 91.78011715187303 } },
            new object[] { new double[] { 812.5685935300381, 117.59769673154341, 841.3763834263098, 445.7597505675051 }, new double[] { 329.42407674082403 } },
            new object[] { new double[] { 827.883352640388, 363.2137956224355, 220.27495864931802, 551.0817346592632 }, new double[] { 635.9892475241642 } },
            new object[] { new double[] { 339.842878036833, 388.8579683364443, 609.4560051342442, 950.6885278933158 }, new double[] { 623.1731829557752 } },
            new object[] { new double[] { 175.6850673470375, 219.84401353034977, 538.1206775115039, 549.2723246601904 }, new double[] { 489.7780963754383 } },
            new object[] { new double[] { 164.15354505065315, 411.7306226046701, 488.0109398829, 514.0520711501401 }, new double[] { 339.6369988973126 } },
            new object[] { new double[] { 331.1166009097187, 185.21418897661113, 655.273447162589, 354.30902412637045 }, new double[] { 365.6100713149616 } },
            new object[] { new double[] { 87.600376581919, 133.86233189432474, 190.92652286643397, 214.45645238771917 }, new double[] { 131.0408515086527 } },
            new object[] { new double[] { 286.07906477049437, 616.1414889737961, 251.96826043260012, 388.9637187640246 }, new double[] { 229.72437017012768 } },
            new object[] { new double[] { 205.5323041182433, 991.3184322293126, 983.3221438365764, 714.5627385247764 }, new double[] { 825.5608692076855 } },
            new object[] { new double[] { 636.0677843486854, 237.48631325628077, 27.985130501105182, 437.8993104743765 }, new double[] { 640.2576695083445 } },
            new object[] { new double[] { 557.7530637854924, 723.3535617757199, 458.7229060702702, 469.6406583982108 }, new double[] { 272.3549329043758 } },
            new object[] { new double[] { 41.53671623761524, 602.5627768446343, 403.9672142330918, 374.7713518027152 }, new double[] { 428.0710212101228 } },
            new object[] { new double[] { 915.7357033058988, 749.0338822692759, 540.0533940330042, 104.21370727875833 }, new double[] { 746.2775995401554 } },
            new object[] { new double[] { 372.30445887367244, 417.6507975175771, 214.47828053385098, 977.6487887122577 }, new double[] { 581.8134174384694 } },
            new object[] { new double[] { 747.130347501469, 370.2077845504025, 835.8876206450757, 847.1181654465094 }, new double[] { 485.0993351287533 } },
            new object[] { new double[] { 263.5335653669142, 10.074111838772826, 113.28436564981669, 384.21878617870664 }, new double[] { 403.1861348714305 } },
            new object[] { new double[] { 198.99073365358387, 797.6403198818113, 932.752537092194, 606.1630086633792 }, new double[] { 758.3336633019279 } },
            new object[] { new double[] { 671.8429943842269, 490.1956406172996, 967.6187397246001, 453.85424440639497 }, new double[] { 297.99998088961553 } }
        };

        [Theory]
        [MemberData(nameof(LengthData))]
        public void Length(double[] points, double[] expected)
        {
            Assert.Equal(expected[0], new PdfLine(points[0], points[1], points[2], points[3]).Length, 6);
        }
        
        [Fact]
        public void IntersectsWith()
        {
            var line0 = new PdfLine(121.86510182798493, 888.4331734682064, 652.3590264996429, 215.71124378171268);
            Assert.True(line0.IntersectsWith(new PdfLine(106.65797430435452, 781.5461110296875, 326.0018708946326, 676.5076331266905)));
            Assert.True(line0.IntersectsWith(new PdfLine(927.6711751799288, 873.1518228789744, 327.1403240297347, 298.8425616048351)));
            Assert.False(line0.IntersectsWith(new PdfLine(211.9532880003101, 282.54578961873966, 14.482078986957859, 119.11793687938943)));
            Assert.True(line0.IntersectsWith(new PdfLine(416.0489181616301, 4.001648778816591, 711.7342176949097, 440.6361129773777)));
            Assert.True(line0.IntersectsWith(new PdfLine(320.63631388750366, 772.3086330223011, 92.88199211021964, 681.3956123187934)));
            Assert.False(line0.IntersectsWith(new PdfLine(254.7767980985196, 256.3384234847108, 385.68931222160694, 389.43422949622897)));
            Assert.False(line0.IntersectsWith(new PdfLine(951.4563739435887, 467.65604606055575, 653.8781391251528, 330.82804696496936)));
            Assert.True(line0.IntersectsWith(new PdfLine(296.0054853334325, 984.372738928386, 150.12649899782483, 92.16578426069843)));
            Assert.True(line0.IntersectsWith(new PdfLine(964.7472263072898, 634.0424073558066, 567.5072243659068, 255.47493029039703)));
            Assert.False(line0.IntersectsWith(new PdfLine(445.5025817002651, 131.29026949481448, 779.5514467908611, 201.47431205695997)));
            Assert.False(line0.IntersectsWith(new PdfLine(201.2807313528062, 237.61025561255232, 215.0277285149166, 100.69451038417643)));
            Assert.True(line0.IntersectsWith(new PdfLine(728.5303333716589, 726.9052646877594, 228.65893311939024, 29.32611297221699)));
            Assert.True(line0.IntersectsWith(new PdfLine(455.46023761228304, 198.14875399499465, 668.8777001944637, 560.649284529973)));
            Assert.True(line0.IntersectsWith(new PdfLine(563.0307388324268, 66.91438078762113, 311.23309771082927, 737.5039979478947)));
            Assert.False(line0.IntersectsWith(new PdfLine(520.2270215007433, 797.6233699545237, 844.9763820377324, 760.5192298844604)));
            Assert.False(line0.IntersectsWith(new PdfLine(824.7288837428943, 317.22986494251506, 715.0600514651438, 205.90900383591136)));
            Assert.False(line0.IntersectsWith(new PdfLine(714.7505932563387, 481.32602310525806, 375.2639238845693, 852.123333646955)));
            Assert.False(line0.IntersectsWith(new PdfLine(718.2104428613408, 34.78596645816956, 600.7243078547273, 758.1526953246846)));
            Assert.False(line0.IntersectsWith(new PdfLine(391.24785605781096, 97.56089354575825, 469.5609873277011, 340.0328643308137)));
            Assert.False(line0.IntersectsWith(new PdfLine(368.49334095796695, 226.32460143513077, 30.741151126828626, 401.9728944817836)));
            
            var line1 = new PdfLine(230.1613967714955, 571.9141862195625, 765.2750076104808, 759.8623896684209);
            Assert.False(line1.IntersectsWith(new PdfLine(48.55330445373185, 692.373078382745, 618.37588330216, 756.3225821516706)));
            Assert.True(line1.IntersectsWith(new PdfLine(470.71765997788674, 976.5288583893856, 526.9800207024798, 411.2520206798771)));
            Assert.False(line1.IntersectsWith(new PdfLine(476.2420312237511, 416.5940458027618, 204.77726076785797, 48.66536672928656)));
            Assert.True(line1.IntersectsWith(new PdfLine(63.225473541715374, 852.0212054417979, 881.2596583573943, 405.4531812223144)));
            Assert.False(line1.IntersectsWith(new PdfLine(907.0840709475256, 822.8209919226243, 89.6289756181683, 28.401408316098276)));
            Assert.True(line1.IntersectsWith(new PdfLine(76.52440856595777, 8.908836052087254, 489.86263411047014, 911.648357552188)));
            Assert.False(line1.IntersectsWith(new PdfLine(152.02843812778022, 363.9278260142812, 200.55748468145595, 153.34633257686147)));
            Assert.True(line1.IntersectsWith(new PdfLine(648.8312592190831, 253.75260683872935, 104.6178178299546, 684.290289784323)));
            Assert.False(line1.IntersectsWith(new PdfLine(324.7728948822769, 127.8027827855882, 866.7617466921944, 159.92551946755106)));
            Assert.False(line1.IntersectsWith(new PdfLine(923.1081675320636, 643.4133624974421, 991.0788584564561, 576.4612567972256)));
            Assert.False(line1.IntersectsWith(new PdfLine(264.4838653053745, 931.9786375793665, 126.15518508823797, 4.854818839558406)));
            Assert.True(line1.IntersectsWith(new PdfLine(244.29731916996533, 966.1362233214004, 427.7016563174992, 28.12732081559577)));
            Assert.True(line1.IntersectsWith(new PdfLine(29.899172798940278, 34.25368837165621, 822.394091757524, 862.0156881421128)));
            Assert.False(line1.IntersectsWith(new PdfLine(379.3932867137456, 220.52740720135134, 342.8336650819017, 543.4172816638109)));
            Assert.False(line1.IntersectsWith(new PdfLine(232.26338814197211, 398.1687360470165, 125.66445493231515, 648.9870954063125)));
            Assert.False(line1.IntersectsWith(new PdfLine(439.76617664403005, 952.0541074984246, 269.4857118223336, 954.2300643651912)));
            Assert.False(line1.IntersectsWith(new PdfLine(789.0561191608085, 710.4943749657895, 452.2588378717548, 583.5378533878925)));
            Assert.True(line1.IntersectsWith(new PdfLine(347.9674376042718, 979.5843512282195, 286.83327692972415, 127.99359519299148)));
            Assert.False(line1.IntersectsWith(new PdfLine(92.6586455785089, 716.1404938324638, 930.212110470076, 856.7417505867188)));
            Assert.True(line1.IntersectsWith(new PdfLine(511.23371308545376, 613.4031648082713, 525.2595738527813, 780.5180733589225)));

            var line2 = new PdfLine(681.5712163856193, 278.35235332501765, 89.49622598121265, 478.3840577494369);
            Assert.True(line2.IntersectsWith(new PdfLine(555.2938054571583, 230.13430671701042, 9.06607133775994, 661.2477207373171)));
            Assert.False(line2.IntersectsWith(new PdfLine(312.5464531007375, 984.4946838425462, 647.0214816594255, 458.99042198014837)));
            Assert.False(line2.IntersectsWith(new PdfLine(706.1891601946595, 503.2414560660433, 213.7012086107456, 915.7203529205516)));
            Assert.True(line2.IntersectsWith(new PdfLine(516.4756289674448, 889.3568188056395, 443.3857730187525, 255.59551206643084)));
            Assert.True(line2.IntersectsWith(new PdfLine(677.5899464550561, 251.9005995625827, 599.270045697367, 468.69554574840976)));
            Assert.False(line2.IntersectsWith(new PdfLine(58.43822236258844, 353.2434776831316, 647.9568960966803, 238.57040552480657)));
            Assert.True(line2.IntersectsWith(new PdfLine(594.6221013456028, 225.47517126242312, 555.8807024248091, 500.4558087778439)));
            Assert.False(line2.IntersectsWith(new PdfLine(505.6211423680611, 506.9508670082764, 613.7622943331244, 916.7167888995149)));
            Assert.False(line2.IntersectsWith(new PdfLine(181.9554901955809, 103.83812004071791, 813.1769117343163, 212.04094248210603)));
            Assert.True(line2.IntersectsWith(new PdfLine(192.61397356916143, 481.26412544334676, 26.122156248780115, 351.6737388640251)));
            Assert.False(line2.IntersectsWith(new PdfLine(533.3687585268123, 546.7063577336295, 734.0604636009198, 838.0593535791487)));
            Assert.True(line2.IntersectsWith(new PdfLine(588.3377898992059, 428.3529117459819, 352.99245312217397, 201.32338004379702)));
            Assert.True(line2.IntersectsWith(new PdfLine(100.81207169769357, 365.0059614538326, 836.9501610532827, 366.7908217495531)));
            Assert.True(line2.IntersectsWith(new PdfLine(309.4732191006059, 804.4079310346496, 762.7871093749146, 104.20384008540606)));
            Assert.True(line2.IntersectsWith(new PdfLine(620.165228658672, 322.5263479723731, 81.50075678495594, 74.82137781430187)));
            Assert.False(line2.IntersectsWith(new PdfLine(344.98668099255235, 622.5514652630136, 890.9739242303083, 263.609734207957)));
            Assert.False(line2.IntersectsWith(new PdfLine(721.9759476200207, 523.0331463894595, 175.6087614668952, 649.4213466430018)));
            Assert.False(line2.IntersectsWith(new PdfLine(362.4717856570472, 428.221058553378, 830.865572391957, 991.4999990297424)));
            Assert.True(line2.IntersectsWith(new PdfLine(201.07050402458904, 321.6603091186927, 353.0923523905989, 810.098585345059)));
            Assert.False(line2.IntersectsWith(new PdfLine(910.4242667185558, 867.020021033747, 727.9222866131214, 238.83365486799025)));

            var line3 = new PdfLine(489.9738439176227, 374.7705883284915, 871.9262353024634, 787.1884433786219);
            Assert.True(line3.IntersectsWith(new PdfLine(872.2571816146803, 693.2629489344569, 529.4023976313039, 719.6053848962767)));
            Assert.False(line3.IntersectsWith(new PdfLine(248.3921952905872, 88.01302715059778, 436.5483136582463, 777.2837893075484)));
            Assert.False(line3.IntersectsWith(new PdfLine(187.58364612449697, 476.00727611009387, 990.8170482716721, 15.255547734205566)));
            Assert.True(line3.IntersectsWith(new PdfLine(885.1600918595342, 46.96177614048614, 571.9541129775752, 891.548614279429)));
            Assert.True(line3.IntersectsWith(new PdfLine(576.6649882556012, 948.349869038489, 475.08985709179694, 236.2758426400251)));
            Assert.False(line3.IntersectsWith(new PdfLine(531.27245928842, 142.7480615799812, 154.3213111834032, 526.2538388506061)));
            Assert.True(line3.IntersectsWith(new PdfLine(881.8175274853771, 25.505202210701626, 480.9005042827823, 938.2873246721758)));
            Assert.False(line3.IntersectsWith(new PdfLine(958.3250663923161, 136.8670470723481, 855.0411792021424, 246.15422872537695)));
            Assert.False(line3.IntersectsWith(new PdfLine(467.6290179503615, 288.9112633707194, 766.6099159094962, 322.0833946500801)));
            Assert.True(line3.IntersectsWith(new PdfLine(719.0037402256572, 956.4575112925683, 749.8148788878581, 511.0524574005092)));
            Assert.False(line3.IntersectsWith(new PdfLine(995.3187839813876, 407.9303435596747, 377.91347458616985, 130.41305570255912)));
            Assert.True(line3.IntersectsWith(new PdfLine(492.61631436354236, 72.28411781217147, 784.1433830572357, 704.105888102883)));
            Assert.False(line3.IntersectsWith(new PdfLine(759.5238447083048, 600.6985614904459, 638.3886373294663, 372.19990350407573)));
            Assert.True(line3.IntersectsWith(new PdfLine(459.48103366324966, 791.8975852411837, 931.1526059112057, 253.58273628850537)));
            Assert.False(line3.IntersectsWith(new PdfLine(478.668011178824, 664.3818183262641, 116.69704115448553, 235.6187842060108)));
            Assert.True(line3.IntersectsWith(new PdfLine(817.7287058030429, 245.110091787617, 95.46523288576525, 867.3892357838256)));
            Assert.False(line3.IntersectsWith(new PdfLine(421.43891095440244, 525.8551990428018, 579.8572760181712, 709.5786739338987)));
            Assert.False(line3.IntersectsWith(new PdfLine(405.27270929845946, 971.7859948825261, 602.7643289679388, 739.42851185728)));
            Assert.False(line3.IntersectsWith(new PdfLine(434.10889800574284, 687.405657562332, 36.105527129304036, 624.8043796411798)));
            Assert.False(line3.IntersectsWith(new PdfLine(407.9918033780493, 802.7120698257748, 402.61114362680604, 384.52039281951886)));


            // need to test for paralell lines
        }

        [Fact]
        public void Intersect()
        {
            var line0 = new PdfLine(249.47344290572826, 472.01986485320856, 732.3041089590511, 429.3963331123053);
            Assert.Null(line0.Intersect(new PdfLine(946.6713787409598, 272.5842702079052, 661.7722741634802, 974.9718084951525)));
            Assert.Null(line0.Intersect(new PdfLine(540.4951330023757, 753.1874086128184, 250.27172041519742, 756.784934462783)));
            Assert.Null(line0.Intersect(new PdfLine(440.3205368146664, 686.771688803123, 264.48095370451307, 709.8806000661422)));
            Assert.Null(line0.Intersect(new PdfLine(915.966158342946, 744.9474270511445, 907.3260222851492, 916.7379211798299)));
            Assert.Equal(new PdfPoint(545.1958434534847, 445.9139564831479), line0.Intersect(new PdfLine(966.1400668322528, 624.6061065235268, 464.3184791386117, 411.58126032919796)).Value, PointComparer);
            Assert.Null(line0.Intersect(new PdfLine(457.4644688402201, 185.19895606329106, 343.63470036832234, 282.14725095181524)));
            Assert.Null(line0.Intersect(new PdfLine(596.9425234714071, 520.3972980490058, 692.1504181909977, 934.6239207853833)));
            Assert.Null(line0.Intersect(new PdfLine(702.5419877932891, 837.7055233563706, 184.57014732227984, 800.6947347151163)));
            Assert.Null(line0.Intersect(new PdfLine(63.908287486616366, 782.5482324259448, 202.12075097336734, 29.037905727768543)));
            Assert.Null(line0.Intersect(new PdfLine(699.4526266285355, 50.701692920919086, 534.9561205104103, 169.54750689077014)));
            Assert.Equal(new PdfPoint(283.0516233385167, 469.05563590069073), line0.Intersect(new PdfLine(397.3618485639624, 200.48430056180177, 75.12971757838005, 957.5671733950289)).Value, PointComparer);
            Assert.Equal(new PdfPoint(628.1904128326876, 438.5873264429044), line0.Intersect(new PdfLine(757.2017859731089, 333.55932267413647, 215.67641327028286, 774.4144775387421)).Value, PointComparer);
            Assert.Null(line0.Intersect(new PdfLine(748.8435297643139, 533.358109476909, 701.6428580416452, 965.0203164274997)));
            Assert.Null(line0.Intersect(new PdfLine(886.6338412881437, 887.5633472524614, 926.764649490491, 745.6663789247506)));
            Assert.Null(line0.Intersect(new PdfLine(189.94143293608457, 353.71515852502154, 909.3320243673451, 97.14417015446696)));
            Assert.Equal(new PdfPoint(686.5657923909976, 433.4340397558154), line0.Intersect(new PdfLine(608.2719064253038, 682.5753778353077, 819.0344381208887, 11.901563194561149)).Value, PointComparer);
            Assert.Null(line0.Intersect(new PdfLine(863.3451705140101, 300.1007553258847, 628.1702242310403, 80.05558039310745)));
            Assert.Null(line0.Intersect(new PdfLine(379.7182020231311, 122.98607964547048, 220.82462806140157, 476.07465576210694)));
            Assert.Null(line0.Intersect(new PdfLine(150.73757132117638, 163.9876267539735, 621.5387365388307, 381.1628197815454)));
            Assert.Null(line0.Intersect(new PdfLine(963.7401653691339, 468.9864141433272, 461.5718937734926, 779.1925326010052)));

            var line1 = new PdfLine(805.4090239582979, 476.7889933681887, 302.5142884961789, 922.3598084329763);
            Assert.Null(line1.Intersect(new PdfLine(80.74661583851028, 554.2004208890269, 306.3044585249692, 556.0641175375137)));
            Assert.Equal(new PdfPoint(718.3651178016886, 553.9109464882264), line1.Intersect(new PdfLine(539.5797804350717, 240.02552755940033, 795.4817008903701, 689.3010816396012)).Value, PointComparer);
            Assert.Equal(new PdfPoint(638.7746772923516, 624.4290389405624), line1.Intersect(new PdfLine(401.4499813337844, 988.372895132168, 934.5386188831096, 170.867015021393)).Value, PointComparer);
            Assert.Null(line1.Intersect(new PdfLine(682.4346840735002, 480.42134915306866, 546.3740655370983, 200.3751001600633)));
            Assert.Null(line1.Intersect(new PdfLine(77.22352473898819, 134.48869782489516, 301.68939728706033, 668.8824171991777)));
            Assert.Equal(new PdfPoint(701.4665906959101, 568.8832457885902), line1.Intersect(new PdfLine(901.5364640930612, 586.1527360560148, 94.94810134320741, 516.5302104662884)).Value, PointComparer);
            Assert.Equal(new PdfPoint(624.8437642002289, 636.7719963496312), line1.Intersect(new PdfLine(840.591970170414, 12.655883306032845, 553.4055248375457, 843.4284367738792)).Value, PointComparer);
            Assert.Null(line1.Intersect(new PdfLine(148.64581345463833, 614.6633416576203, 193.89988447854657, 65.24704638798428)));
            Assert.Null(line1.Intersect(new PdfLine(248.17672727909124, 891.7248029485047, 150.20115866146634, 362.0108883103159)));
            Assert.Null(line1.Intersect(new PdfLine(261.11174590176444, 8.934250136457877, 924.8114439905122, 273.9827355090374)));
            Assert.Equal(new PdfPoint(796.646895313841, 484.55234527169506), line1.Intersect(new PdfLine(935.1255965324843, 690.4339511947389, 727.4037544886379, 381.60590725058927)).Value, PointComparer);
            Assert.Null(line1.Intersect(new PdfLine(899.6539927432093, 32.69185179851786, 28.66371660343381, 375.4911653840769)));
            Assert.Equal(new PdfPoint(557.7316315260696, 696.2341572109548), line1.Intersect(new PdfLine(843.9300053666182, 993.122304586576, 397.96518279311954, 530.5002840914163)).Value, PointComparer);
            Assert.Null(line1.Intersect(new PdfLine(718.0150386321341, 302.8719368347982, 861.1312410432275, 309.755416028656)));
            Assert.Equal(new PdfPoint(724.341934010291, 548.6154150742572), line1.Intersect(new PdfLine(745.031278693096, 782.0724737481689, 717.3560143336663, 469.7868062013797)).Value, PointComparer);
            Assert.Null(line1.Intersect(new PdfLine(372.19847499219725, 159.9777911218353, 660.279657385527, 473.34232882665015)));
            Assert.Null(line1.Intersect(new PdfLine(326.82581111546784, 596.085767017573, 691.8167132271086, 264.08147843750476)));
            Assert.Null(line1.Intersect(new PdfLine(818.7414803241093, 714.0401709084665, 891.4704199532238, 194.71346086805286)));
            Assert.Equal(new PdfPoint(671.619900613135, 595.3277740156508), line1.Intersect(new PdfLine(21.57423583123652, 743.2422768237401, 975.9390184260003, 526.0815449505143)).Value, PointComparer);
            Assert.Equal(new PdfPoint(326.51596528777543, 901.0940326416946), line1.Intersect(new PdfLine(798.5429757903388, 976.1047510758361, 119.10382972392742, 868.1337719904257)).Value, PointComparer);

            var line2 = new PdfLine(351.9016935216292, 145.0516312659712, 413.95324499342, 933.7768132428268);
            Assert.Null(line2.Intersect(new PdfLine(555.7326061092734, 596.7660607553403, 555.3101952087702, 748.2021066579533)));
            Assert.Null(line2.Intersect(new PdfLine(434.9452762531486, 266.16267918746826, 370.0804431002427, 293.10181949672887)));
            Assert.Equal(new PdfPoint(363.27088568715527, 289.5632179546771), line2.Intersect(new PdfLine(433.28817736655236, 454.27297566039005, 254.32586010490942, 33.27925814286659)).Value, PointComparer);
            Assert.Null(line2.Intersect(new PdfLine(981.7946771114343, 355.3735941891449, 427.31815314210144, 553.1409091609705)));
            Assert.Equal(new PdfPoint(405.2231610165113, 822.8104165929249), line2.Intersect(new PdfLine(450.35036850462194, 876.8904008574443, 43.2875505405439, 389.0704798936191)).Value, PointComparer);
            Assert.Equal(new PdfPoint(352.3148117086049, 150.30269605761396), line2.Intersect(new PdfLine(335.6394222133249, 147.76920224797973, 754.5140780889623, 211.4088760303502)).Value, PointComparer);
            Assert.Equal(new PdfPoint(407.35672177955183, 849.9296917951381), line2.Intersect(new PdfLine(886.3510678872603, 743.3709651600388, 258.90820026432357, 882.9540595190294)).Value, PointComparer);
            Assert.Null(line2.Intersect(new PdfLine(699.5324602634907, 30.62029266548705, 438.1893757032378, 185.62504049463791)));
            Assert.Null(line2.Intersect(new PdfLine(25.392070482058937, 783.0010773726668, 331.9724385523838, 410.8713863706629)));
            Assert.Equal(new PdfPoint(387.1180119551795, 592.6793940896622), line2.Intersect(new PdfLine(127.50002828430095, 559.5543804276867, 608.7796689026322, 620.9615081054184)).Value, PointComparer);
            Assert.Null(line2.Intersect(new PdfLine(700.4333788583542, 985.722567203589, 454.4815607496074, 537.8582103267325)));
            Assert.Null(line2.Intersect(new PdfLine(695.3025157099005, 973.528879326945, 732.6364581909932, 948.3480610182024)));
            Assert.Null(line2.Intersect(new PdfLine(999.8609414071335, 31.331087823489256, 469.11558751712425, 747.562026159229)));
            Assert.Equal(new PdfPoint(378.07370772948497, 477.71900507331543), line2.Intersect(new PdfLine(210.82749903103237, 689.8013256401747, 704.8609969023787, 63.325117409769206)).Value, PointComparer);
            Assert.Equal(new PdfPoint(392.2360372608596, 657.7336166648996), line2.Intersect(new PdfLine(828.8916324416031, 399.5799314744642, 115.61389583398585, 821.2744621338746)).Value, PointComparer);
            Assert.Null(line2.Intersect(new PdfLine(312.9420577971906, 575.7851918030872, 369.1653129430475, 848.5174999834271)));
            Assert.Null(line2.Intersect(new PdfLine(994.7168400302381, 218.52516980719062, 602.8188689748915, 547.2309026974548)));
            Assert.Equal(new PdfPoint(381.0876815694553, 516.0290393757577), line2.Intersect(new PdfLine(193.64565487779996, 426.0413081120783, 409.2579997731871, 529.5531303647003)).Value, PointComparer);
            Assert.Equal(new PdfPoint(375.6334131353115, 446.70089590095074), line2.Intersect(new PdfLine(116.42702680625928, 926.1997854715715, 539.6478715859665, 143.29498135384767)).Value, PointComparer);
            Assert.Null(line2.Intersect(new PdfLine(289.3283008851727, 887.2935775850133, 128.73988804916837, 581.7849414489705)));

            var line3 = new PdfLine(827.9764299357637, 571.2599298061439, 269.42809761310895, 747.1120897673287);
            Assert.Equal(new PdfPoint(426.2405090926502, 697.7416061912185), line3.Intersect(new PdfLine(597.9759520434611, 362.8430619098778, 288.87665225221747, 965.6126693934004)).Value, PointComparer);
            Assert.Equal(new PdfPoint(725.181697687369, 603.623603014767), line3.Intersect(new PdfLine(960.6983788833169, 39.57574300958655, 678.827990569521, 714.637859713536)).Value, PointComparer);
            Assert.Null(line3.Intersect(new PdfLine(848.441753184245, 226.01218557979473, 961.7117377516282, 851.4119110049194)));
            Assert.Equal(new PdfPoint(513.7162314550305, 670.2009372259705), line3.Intersect(new PdfLine(538.0192981290608, 860.805671505451, 442.6036462826098, 112.47727286224085)).Value, PointComparer);
            Assert.Equal(new PdfPoint(436.4187668433915, 694.5371053333131), line3.Intersect(new PdfLine(278.34070591188333, 559.6994093955936, 570.5767490067819, 808.9714113968411)).Value, PointComparer);
            Assert.Equal(new PdfPoint(669.0652870832304, 621.2911734700773), line3.Intersect(new PdfLine(741.6848820025791, 656.9267581190151, 118.21235604462099, 350.9789213163321)).Value, PointComparer);
            Assert.Null(line3.Intersect(new PdfLine(104.85791214848173, 875.2509567504092, 759.847180539203, 335.0494402032118)));
            Assert.Equal(new PdfPoint(560.7507267197575, 655.3926975332802), line3.Intersect(new PdfLine(613.226053217281, 723.1667222798209, 194.830706992121, 182.79206543533866)).Value, PointComparer);
            Assert.Equal(new PdfPoint(537.6738790396856, 662.6581628024372), line3.Intersect(new PdfLine(764.8077992586041, 874.9326555599533, 146.55306292710125, 297.1250325364575)).Value, PointComparer);
            Assert.Null(line3.Intersect(new PdfLine(979.8554501847415, 682.366125605611, 58.09639347344508, 973.545841809009)));
            Assert.Equal(new PdfPoint(532.8647782579247, 664.1722497865072), line3.Intersect(new PdfLine(530.470399838713, 701.712690490121, 569.911968144255, 83.32511885506533)).Value, PointComparer);
            Assert.Null(line3.Intersect(new PdfLine(949.940584568515, 911.3281295765591, 612.6414591835184, 906.1725686874659)));
            Assert.Null(line3.Intersect(new PdfLine(920.5210946321213, 322.83749577186416, 150.72810140776494, 263.9548604802149)));
            Assert.Null(line3.Intersect(new PdfLine(867.3018668231659, 414.9718567669486, 704.6924632399761, 257.718843555619)));
            Assert.Null(line3.Intersect(new PdfLine(939.1653932965677, 123.18553916850628, 255.76050234694125, 247.3931578409386)));
            Assert.Null(line3.Intersect(new PdfLine(529.7116927877873, 228.07257844105567, 827.9533012755296, 362.2625343904694)));
            Assert.Equal(new PdfPoint(533.3919167903337, 664.0062866206387), line3.Intersect(new PdfLine(3.5378422551779476, 721.4478307017417, 849.4639656918123, 629.7408777045952)).Value, PointComparer);
            Assert.Null(line3.Intersect(new PdfLine(856.5972144347583, 660.3897499193599, 304.52476823723094, 841.7661947036165)));
            Assert.Equal(new PdfPoint(580.7069188830294, 649.1097327593658), line3.Intersect(new PdfLine(35.708738123459206, 183.13206057626485, 844.7969349272522, 874.9087450635437)).Value, PointComparer);
            Assert.Null(line3.Intersect(new PdfLine(122.32223965238276, 154.29377064067808, 300.48831503480864, 633.3423829686435)));

            var line4 = new PdfLine(272.2500658865409, 944.030904393777, 325.8150603620954, 229.21108602064965);
            Assert.Null(line4.Intersect(new PdfLine(94.23759482120676, 50.728551251037814, 838.9961530818438, 521.7125228321976)));
            Assert.Null(line4.Intersect(new PdfLine(106.17950496328655, 696.4005443937872, 8.81336619921358, 41.91149367532776)));
            Assert.Null(line4.Intersect(new PdfLine(500.36065344929915, 882.9094171578315, 961.1482275308962, 318.49086681599016)));
            Assert.Equal(new PdfPoint(312.4491435568774, 407.5779899406437), line4.Intersect(new PdfLine(618.2238088991691, 911.4108638928444, 303.3231477545474, 392.5408491506552)).Value, PointComparer);
            Assert.Null(line4.Intersect(new PdfLine(281.4082184540746, 979.6282858096472, 913.5382692319204, 311.148978749047)));
            Assert.Null(line4.Intersect(new PdfLine(607.4452789874105, 762.9411783229958, 630.3948270457036, 232.28318910839863)));
            Assert.Equal(new PdfPoint(312.93418988326107, 401.10509228942965), line4.Intersect(new PdfLine(646.9628855796868, 557.0746028019612, 264.28988842381506, 378.3913913840766)).Value, PointComparer);
            Assert.Equal(new PdfPoint(299.828540789867, 575.9987480495781), line4.Intersect(new PdfLine(833.7610711733155, 959.0533757539872, 180.4547011098937, 490.3573999125411)).Value, PointComparer);
            Assert.Equal(new PdfPoint(301.0292352778426, 559.9755929233689), line4.Intersect(new PdfLine(449.1882948826826, 259.4417252863588, 291.156845084154, 580.0012843366668)).Value, PointComparer);
            Assert.Null(line4.Intersect(new PdfLine(806.7141902274523, 92.17984347609298, 262.0311941394193, 229.6055538350278)));
            Assert.Equal(new PdfPoint(312.7290679628452, 403.84242504436787), line4.Intersect(new PdfLine(682.2466893745454, 367.58972005929877, 94.70399650815587, 425.232470164812)).Value, PointComparer);
            Assert.Equal(new PdfPoint(311.23767814165194, 423.7448820789783), line4.Intersect(new PdfLine(515.039723816646, 688.7989508153315, 218.33672413501725, 302.9228571214113)).Value, PointComparer);
            Assert.Null(line4.Intersect(new PdfLine(969.4708245146627, 900.3068255154104, 918.9397260374807, 773.5705288854887)));
            Assert.Null(line4.Intersect(new PdfLine(496.0627957884615, 447.9146019160819, 924.7464937982644, 959.2278477114312)));
            Assert.Equal(new PdfPoint(315.0270907385083, 373.1755270226291), line4.Intersect(new PdfLine(137.57066459141853, 407.0475468535213, 370.2785910543763, 362.6293892747946)).Value, PointComparer);
            Assert.Equal(new PdfPoint(294.48887005559953, 647.2561522892688), line4.Intersect(new PdfLine(715.6460182852811, 510.63316418211866, 20.73076328900536, 736.0630281127584)).Value, PointComparer);
            Assert.Null(line4.Intersect(new PdfLine(835.8448024941904, 894.8049031463455, 556.4752433721656, 882.0142333548768)));
            Assert.Null(line4.Intersect(new PdfLine(498.53009731811073, 811.6398668764998, 951.9489332295883, 866.4765330457532)));
            Assert.Null(line4.Intersect(new PdfLine(533.9099241171612, 448.8008734479916, 986.9261524363459, 494.81790954688154)));
            Assert.Equal(new PdfPoint(288.97653073783704, 720.8178025519654), line4.Intersect(new PdfLine(795.5467166283111, 728.7305691796133, 258.36414851796087, 720.3396286618134)).Value, PointComparer);
        }

        [Fact]
        public void Contains()
        {
            var line = new PdfLine(10, 7.5d, 26.3d, 12);
            Assert.False(line.Contains(new PdfPoint(5, 2)));
            Assert.False(line.Contains(new PdfPoint(5, 6.11963190184049d)));
            Assert.False(line.Contains(new PdfPoint(27, 12.1932515337423d)));
            Assert.False(line.Contains(new PdfPoint(12, 15)));
            Assert.False(line.Contains(new PdfPoint(10, 12)));
            Assert.True(line.Contains(new PdfPoint(20, 10.260736196319d)));
            Assert.True(line.Contains(new PdfPoint(10, 7.5d)));

            var verticalLine = new PdfLine(10, 7.5d, 10, 15);
            Assert.False(verticalLine.Contains(new PdfPoint(5, 2)));
            Assert.False(verticalLine.Contains(new PdfPoint(12, 15)));
            Assert.False(verticalLine.Contains(new PdfPoint(10, 16)));
            Assert.False(verticalLine.Contains(new PdfPoint(10, 7)));
            Assert.True(verticalLine.Contains(new PdfPoint(10, 12)));
            Assert.True(verticalLine.Contains(new PdfPoint(10, 7.5d)));

            var horizontalLine = new PdfLine(10, 7.5d, 26.3d, 7.5d);
            Assert.False(horizontalLine.Contains(new PdfPoint(5, 2)));
            Assert.False(horizontalLine.Contains(new PdfPoint(5, 7.5)));
            Assert.False(horizontalLine.Contains(new PdfPoint(27, 7.5)));
            Assert.False(horizontalLine.Contains(new PdfPoint(10, 12)));
            Assert.True(horizontalLine.Contains(new PdfPoint(20, 7.5)));
            Assert.True(horizontalLine.Contains(new PdfPoint(26.3d, 7.5d)));

            var line0 = new PdfLine(438.3865838366066, 609.9902140686454, 944.7309188382663, 876.9348433851213);
            Assert.False(line0.Contains(new PdfPoint(634.4822834192046, 309.61126869152156)));
            Assert.False(line0.Contains(new PdfPoint(513.4378559485833, 941.0769848202681)));
            Assert.False(line0.Contains(new PdfPoint(965.1109446991279, 329.09245612574057)));
            Assert.False(line0.Contains(new PdfPoint(820.7095483378824, 525.358685774857)));
            Assert.False(line0.Contains(new PdfPoint(990.8069634112412, 663.5926568025885)));
            Assert.True(line0.Contains(new PdfPoint(438.3865838366066, 609.9902140686454)));
            Assert.True(line0.Contains(new PdfPoint(944.7309188382663, 876.9348433851213)));

            var line1 = new PdfLine(934.3159494382417, 759.5192678221186, 260.0914555582554, 754.853110870852);
            Assert.False(line1.Contains(new PdfPoint(214.39243948924536, 717.9615854355675)));
            Assert.False(line1.Contains(new PdfPoint(602.2787326566985, 662.8585244372948)));
            Assert.False(line1.Contains(new PdfPoint(658.3394804169986, 73.36850324595979)));
            Assert.False(line1.Contains(new PdfPoint(166.68617796663375, 846.1564716027135)));
            Assert.False(line1.Contains(new PdfPoint(477.03683917749896, 725.7599348603968)));
            Assert.True(line1.Contains(new PdfPoint(934.3159494382417, 759.5192678221186)));
            Assert.True(line1.Contains(new PdfPoint(260.0914555582554, 754.853110870852)));

            var line2 = new PdfLine(459.5236361336371, 225.75275035034105, 243.6017422524196, 577.1870942626915);
            Assert.False(line2.Contains(new PdfPoint(138.46035708111393, 612.611020472454)));
            Assert.True(line2.Contains(new PdfPoint(372.028832661666, 368.15923957290966)));
            Assert.False(line2.Contains(new PdfPoint(174.3062607282675, 246.10768796449022)));
            Assert.True(line2.Contains(new PdfPoint(407.3009997733987, 310.75028171105555)));
            Assert.False(line2.Contains(new PdfPoint(413.5520960352509, 831.4966615594723)));
            Assert.True(line2.Contains(new PdfPoint(331.59996792967223, 433.96123536322784)));
            Assert.False(line2.Contains(new PdfPoint(507.311911158632, 878.2547755917843)));
            Assert.False(line2.Contains(new PdfPoint(30.25648083800045, 924.4277127301796)));
            Assert.False(line2.Contains(new PdfPoint(494.504688420875, 372.0094967104417)));
            Assert.True(line2.Contains(new PdfPoint(403.89590870792, 316.2924058701583)));
            Assert.True(line2.Contains(new PdfPoint(459.5236361336371, 225.75275035034105)));
            Assert.True(line2.Contains(new PdfPoint(243.6017422524196, 577.1870942626915)));

            var line3 = new PdfLine(509.21323774187186, 888.044377235812, 47.37833742875941, 849.8318450594651);
            Assert.False(line3.Contains(new PdfPoint(678.2233054557167, 546.1624886001035)));
            Assert.True(line3.Contains(new PdfPoint(480.660341056732, 885.6818912422912)));
            Assert.False(line3.Contains(new PdfPoint(506.5932134253688, 110.51265720847093)));
            Assert.True(line3.Contains(new PdfPoint(437.25072258310075, 882.0901500344223)));
            Assert.False(line3.Contains(new PdfPoint(109.31452757193073, 294.37842228373967)));
            Assert.True(line3.Contains(new PdfPoint(476.2526479351329, 885.3171957307168)));
            Assert.False(line3.Contains(new PdfPoint(740.0033114463812, 982.64467663726)));
            Assert.True(line3.Contains(new PdfPoint(88.91977913129028, 853.2690120570946)));
            Assert.False(line3.Contains(new PdfPoint(681.4728580543268, 760.6227653385002)));
            Assert.True(line3.Contains(new PdfPoint(490.18925240056944, 886.4703198151103)));
            Assert.True(line3.Contains(new PdfPoint(509.21323774187186, 888.044377235812)));
            Assert.True(line3.Contains(new PdfPoint(47.37833742875941, 849.8318450594651)));

            var line4 = new PdfLine(405.58207740586516, 672.608614731411, 207.25519576774244, 970.4807982580487);
            Assert.False(line4.Contains(new PdfPoint(392.6618359714601, 96.47934589520469)));
            Assert.True(line4.Contains(new PdfPoint(309.7610862024394, 816.5245964767958)));
            Assert.False(line4.Contains(new PdfPoint(845.9946332716904, 418.6201620546748)));
            Assert.True(line4.Contains(new PdfPoint(280.8428236740471, 859.9576698553517)));
            Assert.False(line4.Contains(new PdfPoint(889.4514788109458, 672.0134606355084)));
            Assert.True(line4.Contains(new PdfPoint(320.58916899950924, 800.2616237545421)));
            Assert.False(line4.Contains(new PdfPoint(985.5749855832817, 486.8777325651764)));
            Assert.False(line4.Contains(new PdfPoint(172.58499465406223, 1022.5528543693492)));
            Assert.False(line4.Contains(new PdfPoint(936.4162971004565, 620.0608255800965)));
            Assert.True(line4.Contains(new PdfPoint(336.6230951431535, 776.1798626162473)));
            Assert.True(line4.Contains(new PdfPoint(405.58207740586516, 672.608614731411)));
            Assert.True(line4.Contains(new PdfPoint(207.25519576774244, 970.4807982580487)));

            var line5 = new PdfLine(435.3238347493861, 795.9122229139125, 732.5503121192992, 908.7240131737507);
            Assert.False(line5.Contains(new PdfPoint(547.4436930896966, 559.6385871353319)));
            Assert.False(line5.Contains(new PdfPoint(13.874097858707657, 635.9517115089891)));
            Assert.False(line5.Contains(new PdfPoint(826.9938262230233, 989.6274928609377)));
            Assert.False(line5.Contains(new PdfPoint(118.97238757058906, 675.8415837725852)));
            Assert.False(line5.Contains(new PdfPoint(232.50406167656078, 813.870814739484)));
            Assert.False(line5.Contains(new PdfPoint(29.09641985978787, 641.7293172325747)));
            Assert.False(line5.Contains(new PdfPoint(312.0559485367265, 438.7925410762308)));
            Assert.False(line5.Contains(new PdfPoint(109.7704752533478, 672.3490140274272)));
            Assert.False(line5.Contains(new PdfPoint(82.60913058985109, 752.1433892591745)));
            Assert.False(line5.Contains(new PdfPoint(50.992247634205874, 650.0398404144613)));
            Assert.True(line5.Contains(new PdfPoint(435.3238347493861, 795.9122229139125)));
            Assert.True(line5.Contains(new PdfPoint(732.5503121192992, 908.7240131737507)));
        }

        [Fact]
        public void ParallelTo()
        {
            // TO DO: IMPROVE

            var verticalLine1 = new PdfLine(10, 7.5d, 10, 15);
            var verticalLine2 = new PdfLine(200, 0, 200, 551.5467d);
            var horizontalLine1 = new PdfLine(10, 7.5d, 26.3d, 7.5d);
            var horizontalLine2 = new PdfLine(27, 57, 200.9999872d, 57);
            var obliqueLine1 = new PdfLine(10, 7.5d, 26.3d, 12);
            var obliqueLine2 = new PdfLine(60, 28.8036809815951d, 40, 23.2822085889571d);

            Assert.True(verticalLine1.ParallelTo(verticalLine2));
            Assert.True(verticalLine2.ParallelTo(verticalLine1));

            Assert.False(obliqueLine1.ParallelTo(verticalLine2));
            Assert.False(verticalLine2.ParallelTo(obliqueLine1));

            Assert.False(obliqueLine1.ParallelTo(verticalLine1));
            Assert.False(verticalLine1.ParallelTo(obliqueLine1));

            Assert.True(horizontalLine1.ParallelTo(horizontalLine2));
            Assert.True(horizontalLine2.ParallelTo(horizontalLine1));

            Assert.False(obliqueLine1.ParallelTo(horizontalLine1));
            Assert.False(horizontalLine1.ParallelTo(obliqueLine1));

            Assert.False(obliqueLine1.ParallelTo(horizontalLine2));
            Assert.False(horizontalLine2.ParallelTo(obliqueLine1));

            Assert.False(verticalLine1.ParallelTo(horizontalLine2));
            Assert.False(horizontalLine2.ParallelTo(verticalLine1));

            Assert.False(verticalLine2.ParallelTo(horizontalLine2));
            Assert.False(horizontalLine2.ParallelTo(verticalLine2));

            Assert.True(obliqueLine1.ParallelTo(obliqueLine2));
            Assert.True(obliqueLine2.ParallelTo(obliqueLine1));
        }
    }
}
