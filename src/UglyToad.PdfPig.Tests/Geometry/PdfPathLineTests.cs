namespace UglyToad.PdfPig.Tests.Geometry
{
    using System.Collections.Generic;
    using UglyToad.PdfPig.Core;
    using UglyToad.PdfPig.Geometry;
    using Xunit;
    using static UglyToad.PdfPig.Core.PdfPath;

    public class PdfPathLineTests
    {
        private static readonly DoubleComparer DoubleComparer = new DoubleComparer(3);
        private static readonly DoubleComparer PreciseDoubleComparer = new DoubleComparer(6);
        private static readonly PointComparer PointComparer = new PointComparer(DoubleComparer);

        private static Line CreateLine(double x1, double y1, double x2, double y2)
        {
            return new Line(new PdfPoint(x1, y1), new PdfPoint(x2, y2));
        }

        [Fact]
        public void OriginIsZero()
        {
            var origin = CreateLine(0, 0, 0, 0);

            Assert.Equal(0, origin.From.X);
            Assert.Equal(0, origin.From.Y);
            Assert.Equal(0, origin.To.X);
            Assert.Equal(0, origin.To.Y);
        }

        public static IEnumerable<object[]> LengthData => new[]
        {
            new object[] { new double[] { 203.6393562261919, 653.7711056659496, 668.6732537652692, 510.7806556412724 }, new double[] { 486.52111429890147 } },
            new object[] { new double[] { 603.4080511773012, 100.91875443776243, 841.0241553459529, 263.5210088232177 }, new double[] { 287.92517446642245 } },
            new object[] { new double[] { 193.57849856660292, 78.77263865356721, 5.514073201039582, 895.0136641292303 }, new double[] { 837.6261933330652 } },
            new object[] { new double[] { 71.5576705442107, 844.2486542429386, 566.1874997552131, 377.52355492168044 }, new double[] { 680.0668983870218 } },
            new object[] { new double[] { 824.3632522411584, 256.8869640839516, 173.996520907298, 409.78519946161396 }, new double[] { 668.0978637950378 } },
            new object[] { new double[] { 513.4750642922347, 257.58627840515425, 559.5729589144768, 822.4354830219256 }, new double[] { 566.7271299706788 } },
            new object[] { new double[] { 806.6483836188821, 902.9149785105487, 415.4188983399237, 531.8732638772599 }, new double[] { 539.1961277213048 } },
            new object[] { new double[] { 628.6113267467194, 49.29172600767251, 364.2612541347349, 596.1705234769407 }, new double[] { 607.4186200730056 } },
            new object[] { new double[] { 610.6797096041602, 340.233431535001, 842.8839616962393, 145.26525722166807 }, new double[] { 303.20191899906575 } },
            new object[] { new double[] { 985.1500668259025, 936.6878417215714, 514.8490099035929, 752.5097862250847 }, new double[] { 505.07884559611927 } },
            new object[] { new double[] { 584.217901435419, 681.1288908887499, 892.8498098515248, 250.46452847922052 }, new double[] { 529.8353026575088 } },
            new object[] { new double[] { 965.5098993464029, 476.8649000884236, 207.59232627734704, 142.43046303613028 }, new double[] { 828.4234667447391 } },
            new object[] { new double[] { 628.0238433497099, 471.5356322600011, 699.7206498422923, 412.76364554792247 }, new double[] { 92.70694948772483 } },
            new object[] { new double[] { 573.5846200070941, 127.91003433047432, 181.53938421221895, 977.2835720832618 }, new double[] { 935.4864368573951 } },
            new object[] { new double[] { 136.02743182264342, 797.2921794611028, 922.6805030294474, 19.6793235302557 }, new double[] { 1106.1215159954288 } },
            new object[] { new double[] { 975.3750009890167, 101.20350442890013, 439.32720715798445, 671.4421682823613 }, new double[] { 782.6361677206705 } },
            new object[] { new double[] { 106.14773114074838, 285.5825785947973, 366.3014724372201, 693.6654671835446 }, new double[] { 483.9541435606141 } },
            new object[] { new double[] { 398.8247676552843, 612.0454025570381, 48.86968454536944, 49.184590813528885 }, new double[] { 662.7826593922246 } },
            new object[] { new double[] { 254.39825561927177, 618.9372799841276, 295.8610934545222, 765.0446090402525 }, new double[] { 151.87665562971492 } },
            new object[] { new double[] { 691.075455944406, 523.2084167886, 117.99900372861794, 147.59742228890627 }, new double[] { 685.2008751258885 } },
            new object[] { new double[] { 62.90844168416609, 717.828999050165, 663.850625220381, 593.6739708696773 }, new double[] { 613.6334239395467 } },
            new object[] { new double[] { 475.6774573353646, 260.39103906070636, 1.167329293767283, 910.005226218077 }, new double[] { 804.4615924767226 } },
            new object[] { new double[] { 970.9230200015627, 635.6587670781581, 928.9648112833321, 526.4933240530959 }, new double[] { 116.95120875690303 } },
            new object[] { new double[] { 75.41742779823701, 69.31501232813187, 716.6812681054872, 387.16590103006433 }, new double[] { 715.7153766227262 } },
            new object[] { new double[] { 895.1022288146066, 823.2204461297727, 1.2060858794223916, 103.34156568020735 }, new double[] { 1147.7264120302011 } },
            new object[] { new double[] { 959.0892022414018, 921.9868122845503, 926.90057447649, 725.6090256356241 }, new double[] { 198.9983488537511 } },
            new object[] { new double[] { 86.85046547648389, 573.0573610984234, 171.99415974902644, 164.37912217889584 }, new double[] { 417.45341253934265 } },
            new object[] { new double[] { 537.9350107951734, 756.0791641221463, 941.5587800119547, 432.83666726086443 }, new double[] { 517.105268638676 } },
            new object[] { new double[] { 400.9957877973476, 454.3683644831762, 581.9409134743072, 751.7027210220722 }, new double[] { 348.0644453038115 } },
            new object[] { new double[] { 262.5526967061944, 194.79449757290024, 351.78114981214026, 638.9616534168371 }, new double[] { 453.0410347575284 } },
            new object[] { new double[] { 163.90270965409837, 82.57844382603308, 858.7766030140083, 728.63148721353 }, new double[] { 948.8067572184583 } },
            new object[] { new double[] { 282.35443910183676, 135.92508955184846, 204.5993962679128, 476.0785090361194 }, new double[] { 348.92720655309716 } },
            new object[] { new double[] { 928.2674389489563, 561.3135982429999, 311.7799070641978, 991.1388829814965 }, new double[] { 751.5361949832428 } },
            new object[] { new double[] { 271.4744617345959, 882.4420089059386, 794.7305967174647, 394.83288251089897 }, new double[] { 715.2339777589876 } },
            new object[] { new double[] { 427.682233047728, 247.31796885592817, 937.3359700176242, 941.4763612194208 }, new double[] { 861.1636344482091 } },
            new object[] { new double[] { 970.4125903474886, 271.48171428601154, 996.3839093374331, 917.6658948940459 }, new double[] { 646.7058873074794 } },
            new object[] { new double[] { 17.877842886854346, 488.489724196333, 973.3995430334635, 737.2331732460705 }, new double[] { 987.3677242528368 } },
            new object[] { new double[] { 604.3340173536551, 432.97018658955864, 725.7032617991929, 144.65660436481042 }, new double[] { 312.81818232408955 } },
            new object[] { new double[] { 133.39878172734387, 493.7719607806673, 304.7961403066075, 61.93319025110433 }, new double[] { 464.6092748325556 } },
            new object[] { new double[] { 703.9914096465704, 910.2385544989897, 604.1123055438115, 717.9486657374232 }, new double[] { 216.68234066555905 } },
            new object[] { new double[] { 746.3622327400728, 436.97131098230454, 430.0361399391416, 111.10588187907422 }, new double[] { 454.1480759304566 } },
            new object[] { new double[] { 958.3928927203634, 213.7833284029088, 926.5089401690861, 509.84126051384703 }, new double[] { 297.76985340376046 } },
            new object[] { new double[] { 90.34634399362895, 123.34602438424014, 759.0509558050063, 709.0293817634885 }, new double[] { 888.9267984310255 } },
            new object[] { new double[] { 391.85817959632374, 782.742773334919, 751.7973154560902, 625.5736338083373 }, new double[] { 392.75732958533257 } },
            new object[] { new double[] { 733.8015914781228, 986.3885490153228, 649.1573706684677, 945.1283068044685 }, new double[] { 94.16502378150822 } },
            new object[] { new double[] { 168.98641955995308, 376.4036161060361, 310.1985482890408, 456.9776720218224 }, new double[] { 162.58242151881208 } },
            new object[] { new double[] { 798.6465761343123, 134.08793342691038, 763.1198116642857, 109.51130850655177 }, new double[] { 43.19909126572845 } },
            new object[] { new double[] { 906.5994352097326, 38.60538044929118, 693.0897070548071, 827.846607333167 }, new double[] { 817.6112268248007 } },
            new object[] { new double[] { 977.2164079206794, 27.26517002236928, 862.4641217897342, 577.0862486263294 }, new double[] { 561.6683235233231 } },
            new object[] { new double[] { 171.74089139517056, 291.16738257984565, 507.2707339346226, 658.3741896124226 }, new double[] { 497.414429189192 } },
            new object[] { new double[] { 943.2448450716314, 861.7444480434415, 848.4694325362001, 972.1455084152979 }, new double[] { 145.50179707650167 } },
            new object[] { new double[] { 248.53144830633468, 438.34508313172074, 796.8631839712402, 10.355320810936263 }, new double[] { 695.5881892245508 } },
            new object[] { new double[] { 302.1530183641946, 942.692173652902, 687.3967956302066, 808.4481394024577 }, new double[] { 407.9635138759582 } },
            new object[] { new double[] { 51.34574806939229, 559.3752667042155, 418.3663443095391, 653.352987189104 }, new double[] { 378.8613598824888 } },
            new object[] { new double[] { 528.0941220282368, 770.734710522943, 113.71356625536966, 932.1167052383686 }, new double[] { 444.6969678567192 } },
            new object[] { new double[] { 956.7041400918374, 642.5453204701912, 860.9158507465811, 779.1904626700094 }, new double[] { 166.87507681645897 } },
            new object[] { new double[] { 213.37831460681244, 868.3885326959949, 169.20898036917143, 103.62265635178657 }, new double[] { 766.0403225075827 } },
            new object[] { new double[] { 715.8881469039312, 485.3691476259638, 398.4362707095754, 1.4647587715365118 }, new double[] { 578.7392774401037 } },
            new object[] { new double[] { 311.0799034795112, 379.869429723655, 84.66930409764772, 837.2733590416237 }, new double[] { 510.37252479730137 } },
            new object[] { new double[] { 315.2298751711895, 310.3069273210918, 243.1599252393827, 379.5932667928296 }, new double[] { 99.97336905679448 } },
            new object[] { new double[] { 6.556161615975831, 740.6013675997763, 575.2917622931905, 293.3316665120933 }, new double[] { 723.5401640467081 } },
            new object[] { new double[] { 459.82009106910425, 570.584712691188, 465.8376490924, 531.2898976191844 }, new double[] { 39.75290550521668 } },
            new object[] { new double[] { 72.60398188783346, 582.7276243062277, 503.85120288341045, 227.39063736402554 }, new double[] { 558.7830884212323 } },
            new object[] { new double[] { 114.884375612891, 125.25555035663083, 923.8123345829763, 990.0895491336473 }, new double[] { 1184.1884513218968 } },
            new object[] { new double[] { 573.0405805853932, 295.9776764119988, 130.9314138174904, 749.9798552159747 }, new double[] { 633.7022121619638 } },
            new object[] { new double[] { 265.4563468795599, 991.9860405989386, 39.987840268431384, 72.3783187391206 }, new double[] { 946.8444484590153 } },
            new object[] { new double[] { 364.9213533110334, 695.8201441756818, 426.4792165201988, 285.6878213094658 }, new double[] { 414.7262865825077 } },
            new object[] { new double[] { 971.1843312242235, 881.2931537019231, 863.5329640816301, 133.3296787541679 }, new double[] { 755.6706800608256 } },
            new object[] { new double[] { 412.15047192078515, 27.904066635185632, 722.6689294747406, 613.1747287708191 }, new double[] { 662.5431762823994 } },
            new object[] { new double[] { 280.9608818253528, 563.7753243456169, 56.538498522971324, 25.1922949588671 }, new double[] { 583.4698669773184 } },
            new object[] { new double[] { 575.1803484469157, 668.9581325690161, 650.6107368403026, 98.61403634384136 }, new double[] { 575.3104653941979 } },
            new object[] { new double[] { 205.36827323762162, 349.53921834144273, 945.4240167992361, 27.751361948006313 }, new double[] { 806.9881833712418 } },
            new object[] { new double[] { 899.7983767792504, 568.2556748349472, 737.1256661178463, 160.87679359768381 }, new double[] { 438.65700002627705 } },
            new object[] { new double[] { 545.987669155604, 921.2270760121767, 661.1961184519588, 412.56533968427976 }, new double[] { 521.5455385614775 } },
            new object[] { new double[] { 859.7501861347986, 550.607415036509, 504.19348413152, 987.863633565226 }, new double[] { 563.5721506439804 } },
            new object[] { new double[] { 105.38194002008639, 195.4761524643246, 626.9605959849612, 746.4884744777166 }, new double[] { 758.7218682552357 } },
            new object[] { new double[] { 767.0814418705742, 653.3711994828556, 859.8807290223717, 34.91820363419418 }, new double[] { 625.3765391906433 } },
            new object[] { new double[] { 564.2287510306862, 561.0754236280711, 496.53723344980983, 173.76147316750524 }, new double[] { 393.1847374629028 } },
            new object[] { new double[] { 743.0507579408845, 461.0127716849919, 216.61039425628147, 587.9548348246492 }, new double[] { 541.5290794689884 } },
            new object[] { new double[] { 772.6599011768819, 792.4175477433819, 849.9996664267471, 462.9226309158545 }, new double[] { 338.4499069346651 } },
            new object[] { new double[] { 611.7278952164681, 76.25318222146826, 832.4599948782932, 998.4507051943632 }, new double[] { 948.2462397491809 } },
            new object[] { new double[] { 723.5423318520674, 111.73938830605357, 226.39458731765737, 435.35104374215786 }, new double[] { 593.1950635581409 } },
            new object[] { new double[] { 711.5197315056917, 671.1224546803052, 157.62629705205677, 211.13144707637198 }, new double[] { 719.9928220526402 } },
            new object[] { new double[] { 747.833281342343, 874.0538149112479, 843.9971743200878, 177.6266618598019 }, new double[] { 703.0350445176806 } },
            new object[] { new double[] { 896.6167879610257, 801.5829254511037, 24.779055794734273, 954.9524609495887 }, new double[] { 885.2249689473762 } },
            new object[] { new double[] { 274.13402384946596, 3.4413088002945846, 281.89022485538607, 551.1156675179184 }, new double[] { 547.7292778835222 } },
            new object[] { new double[] { 536.1023986747776, 60.7040132568859, 979.1682645680364, 944.5878138875964 }, new double[] { 988.7152949849278 } },
            new object[] { new double[] { 829.9847463180587, 439.1550609111461, 545.1985047658595, 881.3488540346133 }, new double[] { 525.9644037901683 } },
            new object[] { new double[] { 276.97697963080003, 189.09718815391784, 516.4008601281319, 804.8674588085569 }, new double[] { 660.6790603420757 } },
            new object[] { new double[] { 853.8603959923051, 961.8142637194284, 634.1360581243051, 140.00825942840643 }, new double[] { 850.6726123135188 } },
            new object[] { new double[] { 608.0662091541988, 268.76885286859795, 208.8700873051732, 374.76302883418435 }, new double[] { 413.02821821024014 } },
            new object[] { new double[] { 450.071540402517, 31.646964487920926, 568.0318631651296, 581.1800418798529 }, new double[] { 562.0509237552294 } },
            new object[] { new double[] { 10.173363666040824, 306.7938566122437, 627.2779897821499, 505.45955295310165 }, new double[] { 648.2948237310712 } },
            new object[] { new double[] { 332.5237172341329, 281.01833768454145, 554.6895575767154, 845.2031382917991 }, new double[] { 606.3515068434949 } },
            new object[] { new double[] { 384.1159420937238, 361.52668135979326, 500.9571816315105, 885.6841221285132 }, new double[] { 537.0222509076701 } },
            new object[] { new double[] { 367.7509718721161, 438.8561174107423, 111.16471502447112, 497.2669504455285 }, new double[] { 263.15077924814005 } },
            new object[] { new double[] { 393.397528622713, 596.6312402026481, 647.1757241573138, 493.5939821635904 }, new double[] { 273.897880738434 } },
            new object[] { new double[] { 801.118056132731, 745.6718137807256, 743.6786994333212, 10.899480357666413 }, new double[] { 737.0140172764758 } },
            new object[] { new double[] { 784.1119670217424, 913.5636800447771, 410.14752119495944, 411.57572111136 }, new double[] { 625.9722978348731 } },
            new object[] { new double[] { 358.41794014587316, 582.4142642499664, 289.26726454252525, 661.5923120289328 }, new double[] { 105.12363762012681 } }
        };

        [Theory]
        [MemberData(nameof(LengthData))]
        public void Length(double[] points, double[] expected)
        {
            Assert.Equal(expected[0], CreateLine(points[0], points[1], points[2], points[3]).Length, 6);
        }

        [Fact]
        public void IntersectsWith()
        {
            var line0 = CreateLine(121.86510182798493, 888.4331734682064, 652.3590264996429, 215.71124378171268);
            Assert.True(line0.IntersectsWith(CreateLine(106.65797430435452, 781.5461110296875, 326.0018708946326, 676.5076331266905)));
            Assert.True(line0.IntersectsWith(CreateLine(927.6711751799288, 873.1518228789744, 327.1403240297347, 298.8425616048351)));
            Assert.False(line0.IntersectsWith(CreateLine(211.9532880003101, 282.54578961873966, 14.482078986957859, 119.11793687938943)));
            Assert.True(line0.IntersectsWith(CreateLine(416.0489181616301, 4.001648778816591, 711.7342176949097, 440.6361129773777)));
            Assert.True(line0.IntersectsWith(CreateLine(320.63631388750366, 772.3086330223011, 92.88199211021964, 681.3956123187934)));
            Assert.False(line0.IntersectsWith(CreateLine(254.7767980985196, 256.3384234847108, 385.68931222160694, 389.43422949622897)));
            Assert.False(line0.IntersectsWith(CreateLine(951.4563739435887, 467.65604606055575, 653.8781391251528, 330.82804696496936)));
            Assert.True(line0.IntersectsWith(CreateLine(296.0054853334325, 984.372738928386, 150.12649899782483, 92.16578426069843)));
            Assert.True(line0.IntersectsWith(CreateLine(964.7472263072898, 634.0424073558066, 567.5072243659068, 255.47493029039703)));
            Assert.False(line0.IntersectsWith(CreateLine(445.5025817002651, 131.29026949481448, 779.5514467908611, 201.47431205695997)));
            Assert.False(line0.IntersectsWith(CreateLine(201.2807313528062, 237.61025561255232, 215.0277285149166, 100.69451038417643)));
            Assert.True(line0.IntersectsWith(CreateLine(728.5303333716589, 726.9052646877594, 228.65893311939024, 29.32611297221699)));
            Assert.True(line0.IntersectsWith(CreateLine(455.46023761228304, 198.14875399499465, 668.8777001944637, 560.649284529973)));
            Assert.True(line0.IntersectsWith(CreateLine(563.0307388324268, 66.91438078762113, 311.23309771082927, 737.5039979478947)));
            Assert.False(line0.IntersectsWith(CreateLine(520.2270215007433, 797.6233699545237, 844.9763820377324, 760.5192298844604)));
            Assert.False(line0.IntersectsWith(CreateLine(824.7288837428943, 317.22986494251506, 715.0600514651438, 205.90900383591136)));
            Assert.False(line0.IntersectsWith(CreateLine(714.7505932563387, 481.32602310525806, 375.2639238845693, 852.123333646955)));
            Assert.False(line0.IntersectsWith(CreateLine(718.2104428613408, 34.78596645816956, 600.7243078547273, 758.1526953246846)));
            Assert.False(line0.IntersectsWith(CreateLine(391.24785605781096, 97.56089354575825, 469.5609873277011, 340.0328643308137)));
            Assert.False(line0.IntersectsWith(CreateLine(368.49334095796695, 226.32460143513077, 30.741151126828626, 401.9728944817836)));

            var line1 = CreateLine(230.1613967714955, 571.9141862195625, 765.2750076104808, 759.8623896684209);
            Assert.False(line1.IntersectsWith(CreateLine(48.55330445373185, 692.373078382745, 618.37588330216, 756.3225821516706)));
            Assert.True(line1.IntersectsWith(CreateLine(470.71765997788674, 976.5288583893856, 526.9800207024798, 411.2520206798771)));
            Assert.False(line1.IntersectsWith(CreateLine(476.2420312237511, 416.5940458027618, 204.77726076785797, 48.66536672928656)));
            Assert.True(line1.IntersectsWith(CreateLine(63.225473541715374, 852.0212054417979, 881.2596583573943, 405.4531812223144)));
            Assert.False(line1.IntersectsWith(CreateLine(907.0840709475256, 822.8209919226243, 89.6289756181683, 28.401408316098276)));
            Assert.True(line1.IntersectsWith(CreateLine(76.52440856595777, 8.908836052087254, 489.86263411047014, 911.648357552188)));
            Assert.False(line1.IntersectsWith(CreateLine(152.02843812778022, 363.9278260142812, 200.55748468145595, 153.34633257686147)));
            Assert.True(line1.IntersectsWith(CreateLine(648.8312592190831, 253.75260683872935, 104.6178178299546, 684.290289784323)));
            Assert.False(line1.IntersectsWith(CreateLine(324.7728948822769, 127.8027827855882, 866.7617466921944, 159.92551946755106)));
            Assert.False(line1.IntersectsWith(CreateLine(923.1081675320636, 643.4133624974421, 991.0788584564561, 576.4612567972256)));
            Assert.False(line1.IntersectsWith(CreateLine(264.4838653053745, 931.9786375793665, 126.15518508823797, 4.854818839558406)));
            Assert.True(line1.IntersectsWith(CreateLine(244.29731916996533, 966.1362233214004, 427.7016563174992, 28.12732081559577)));
            Assert.True(line1.IntersectsWith(CreateLine(29.899172798940278, 34.25368837165621, 822.394091757524, 862.0156881421128)));
            Assert.False(line1.IntersectsWith(CreateLine(379.3932867137456, 220.52740720135134, 342.8336650819017, 543.4172816638109)));
            Assert.False(line1.IntersectsWith(CreateLine(232.26338814197211, 398.1687360470165, 125.66445493231515, 648.9870954063125)));
            Assert.False(line1.IntersectsWith(CreateLine(439.76617664403005, 952.0541074984246, 269.4857118223336, 954.2300643651912)));
            Assert.False(line1.IntersectsWith(CreateLine(789.0561191608085, 710.4943749657895, 452.2588378717548, 583.5378533878925)));
            Assert.True(line1.IntersectsWith(CreateLine(347.9674376042718, 979.5843512282195, 286.83327692972415, 127.99359519299148)));
            Assert.False(line1.IntersectsWith(CreateLine(92.6586455785089, 716.1404938324638, 930.212110470076, 856.7417505867188)));
            Assert.True(line1.IntersectsWith(CreateLine(511.23371308545376, 613.4031648082713, 525.2595738527813, 780.5180733589225)));

            var line2 = CreateLine(681.5712163856193, 278.35235332501765, 89.49622598121265, 478.3840577494369);
            Assert.True(line2.IntersectsWith(CreateLine(555.2938054571583, 230.13430671701042, 9.06607133775994, 661.2477207373171)));
            Assert.False(line2.IntersectsWith(CreateLine(312.5464531007375, 984.4946838425462, 647.0214816594255, 458.99042198014837)));
            Assert.False(line2.IntersectsWith(CreateLine(706.1891601946595, 503.2414560660433, 213.7012086107456, 915.7203529205516)));
            Assert.True(line2.IntersectsWith(CreateLine(516.4756289674448, 889.3568188056395, 443.3857730187525, 255.59551206643084)));
            Assert.True(line2.IntersectsWith(CreateLine(677.5899464550561, 251.9005995625827, 599.270045697367, 468.69554574840976)));
            Assert.False(line2.IntersectsWith(CreateLine(58.43822236258844, 353.2434776831316, 647.9568960966803, 238.57040552480657)));
            Assert.True(line2.IntersectsWith(CreateLine(594.6221013456028, 225.47517126242312, 555.8807024248091, 500.4558087778439)));
            Assert.False(line2.IntersectsWith(CreateLine(505.6211423680611, 506.9508670082764, 613.7622943331244, 916.7167888995149)));
            Assert.False(line2.IntersectsWith(CreateLine(181.9554901955809, 103.83812004071791, 813.1769117343163, 212.04094248210603)));
            Assert.True(line2.IntersectsWith(CreateLine(192.61397356916143, 481.26412544334676, 26.122156248780115, 351.6737388640251)));
            Assert.False(line2.IntersectsWith(CreateLine(533.3687585268123, 546.7063577336295, 734.0604636009198, 838.0593535791487)));
            Assert.True(line2.IntersectsWith(CreateLine(588.3377898992059, 428.3529117459819, 352.99245312217397, 201.32338004379702)));
            Assert.True(line2.IntersectsWith(CreateLine(100.81207169769357, 365.0059614538326, 836.9501610532827, 366.7908217495531)));
            Assert.True(line2.IntersectsWith(CreateLine(309.4732191006059, 804.4079310346496, 762.7871093749146, 104.20384008540606)));
            Assert.True(line2.IntersectsWith(CreateLine(620.165228658672, 322.5263479723731, 81.50075678495594, 74.82137781430187)));
            Assert.False(line2.IntersectsWith(CreateLine(344.98668099255235, 622.5514652630136, 890.9739242303083, 263.609734207957)));
            Assert.False(line2.IntersectsWith(CreateLine(721.9759476200207, 523.0331463894595, 175.6087614668952, 649.4213466430018)));
            Assert.False(line2.IntersectsWith(CreateLine(362.4717856570472, 428.221058553378, 830.865572391957, 991.4999990297424)));
            Assert.True(line2.IntersectsWith(CreateLine(201.07050402458904, 321.6603091186927, 353.0923523905989, 810.098585345059)));
            Assert.False(line2.IntersectsWith(CreateLine(910.4242667185558, 867.020021033747, 727.9222866131214, 238.83365486799025)));

            var line3 = CreateLine(489.9738439176227, 374.7705883284915, 871.9262353024634, 787.1884433786219);
            Assert.True(line3.IntersectsWith(CreateLine(872.2571816146803, 693.2629489344569, 529.4023976313039, 719.6053848962767)));
            Assert.False(line3.IntersectsWith(CreateLine(248.3921952905872, 88.01302715059778, 436.5483136582463, 777.2837893075484)));
            Assert.False(line3.IntersectsWith(CreateLine(187.58364612449697, 476.00727611009387, 990.8170482716721, 15.255547734205566)));
            Assert.True(line3.IntersectsWith(CreateLine(885.1600918595342, 46.96177614048614, 571.9541129775752, 891.548614279429)));
            Assert.True(line3.IntersectsWith(CreateLine(576.6649882556012, 948.349869038489, 475.08985709179694, 236.2758426400251)));
            Assert.False(line3.IntersectsWith(CreateLine(531.27245928842, 142.7480615799812, 154.3213111834032, 526.2538388506061)));
            Assert.True(line3.IntersectsWith(CreateLine(881.8175274853771, 25.505202210701626, 480.9005042827823, 938.2873246721758)));
            Assert.False(line3.IntersectsWith(CreateLine(958.3250663923161, 136.8670470723481, 855.0411792021424, 246.15422872537695)));
            Assert.False(line3.IntersectsWith(CreateLine(467.6290179503615, 288.9112633707194, 766.6099159094962, 322.0833946500801)));
            Assert.True(line3.IntersectsWith(CreateLine(719.0037402256572, 956.4575112925683, 749.8148788878581, 511.0524574005092)));
            Assert.False(line3.IntersectsWith(CreateLine(995.3187839813876, 407.9303435596747, 377.91347458616985, 130.41305570255912)));
            Assert.True(line3.IntersectsWith(CreateLine(492.61631436354236, 72.28411781217147, 784.1433830572357, 704.105888102883)));
            Assert.False(line3.IntersectsWith(CreateLine(759.5238447083048, 600.6985614904459, 638.3886373294663, 372.19990350407573)));
            Assert.True(line3.IntersectsWith(CreateLine(459.48103366324966, 791.8975852411837, 931.1526059112057, 253.58273628850537)));
            Assert.False(line3.IntersectsWith(CreateLine(478.668011178824, 664.3818183262641, 116.69704115448553, 235.6187842060108)));
            Assert.True(line3.IntersectsWith(CreateLine(817.7287058030429, 245.110091787617, 95.46523288576525, 867.3892357838256)));
            Assert.False(line3.IntersectsWith(CreateLine(421.43891095440244, 525.8551990428018, 579.8572760181712, 709.5786739338987)));
            Assert.False(line3.IntersectsWith(CreateLine(405.27270929845946, 971.7859948825261, 602.7643289679388, 739.42851185728)));
            Assert.False(line3.IntersectsWith(CreateLine(434.10889800574284, 687.405657562332, 36.105527129304036, 624.8043796411798)));
            Assert.False(line3.IntersectsWith(CreateLine(407.9918033780493, 802.7120698257748, 402.61114362680604, 384.52039281951886)));


            // need to test for paralell lines
        }

        [Fact]
        public void Intersect()
        {
            var line0 = CreateLine(249.47344290572826, 472.01986485320856, 732.3041089590511, 429.3963331123053);
            Assert.Null(line0.Intersect(CreateLine(946.6713787409598, 272.5842702079052, 661.7722741634802, 974.9718084951525)));
            Assert.Null(line0.Intersect(CreateLine(540.4951330023757, 753.1874086128184, 250.27172041519742, 756.784934462783)));
            Assert.Null(line0.Intersect(CreateLine(440.3205368146664, 686.771688803123, 264.48095370451307, 709.8806000661422)));
            Assert.Null(line0.Intersect(CreateLine(915.966158342946, 744.9474270511445, 907.3260222851492, 916.7379211798299)));
            Assert.Equal(new PdfPoint(545.1958434534847, 445.9139564831479), line0.Intersect(CreateLine(966.1400668322528, 624.6061065235268, 464.3184791386117, 411.58126032919796)).Value, PointComparer);
            Assert.Null(line0.Intersect(CreateLine(457.4644688402201, 185.19895606329106, 343.63470036832234, 282.14725095181524)));
            Assert.Null(line0.Intersect(CreateLine(596.9425234714071, 520.3972980490058, 692.1504181909977, 934.6239207853833)));
            Assert.Null(line0.Intersect(CreateLine(702.5419877932891, 837.7055233563706, 184.57014732227984, 800.6947347151163)));
            Assert.Null(line0.Intersect(CreateLine(63.908287486616366, 782.5482324259448, 202.12075097336734, 29.037905727768543)));
            Assert.Null(line0.Intersect(CreateLine(699.4526266285355, 50.701692920919086, 534.9561205104103, 169.54750689077014)));
            Assert.Equal(new PdfPoint(283.0516233385167, 469.05563590069073), line0.Intersect(CreateLine(397.3618485639624, 200.48430056180177, 75.12971757838005, 957.5671733950289)).Value, PointComparer);
            Assert.Equal(new PdfPoint(628.1904128326876, 438.5873264429044), line0.Intersect(CreateLine(757.2017859731089, 333.55932267413647, 215.67641327028286, 774.4144775387421)).Value, PointComparer);
            Assert.Null(line0.Intersect(CreateLine(748.8435297643139, 533.358109476909, 701.6428580416452, 965.0203164274997)));
            Assert.Null(line0.Intersect(CreateLine(886.6338412881437, 887.5633472524614, 926.764649490491, 745.6663789247506)));
            Assert.Null(line0.Intersect(CreateLine(189.94143293608457, 353.71515852502154, 909.3320243673451, 97.14417015446696)));
            Assert.Equal(new PdfPoint(686.5657923909976, 433.4340397558154), line0.Intersect(CreateLine(608.2719064253038, 682.5753778353077, 819.0344381208887, 11.901563194561149)).Value, PointComparer);
            Assert.Null(line0.Intersect(CreateLine(863.3451705140101, 300.1007553258847, 628.1702242310403, 80.05558039310745)));
            Assert.Null(line0.Intersect(CreateLine(379.7182020231311, 122.98607964547048, 220.82462806140157, 476.07465576210694)));
            Assert.Null(line0.Intersect(CreateLine(150.73757132117638, 163.9876267539735, 621.5387365388307, 381.1628197815454)));
            Assert.Null(line0.Intersect(CreateLine(963.7401653691339, 468.9864141433272, 461.5718937734926, 779.1925326010052)));

            var line1 = CreateLine(805.4090239582979, 476.7889933681887, 302.5142884961789, 922.3598084329763);
            Assert.Null(line1.Intersect(CreateLine(80.74661583851028, 554.2004208890269, 306.3044585249692, 556.0641175375137)));
            Assert.Equal(new PdfPoint(718.3651178016886, 553.9109464882264), line1.Intersect(CreateLine(539.5797804350717, 240.02552755940033, 795.4817008903701, 689.3010816396012)).Value, PointComparer);
            Assert.Equal(new PdfPoint(638.7746772923516, 624.4290389405624), line1.Intersect(CreateLine(401.4499813337844, 988.372895132168, 934.5386188831096, 170.867015021393)).Value, PointComparer);
            Assert.Null(line1.Intersect(CreateLine(682.4346840735002, 480.42134915306866, 546.3740655370983, 200.3751001600633)));
            Assert.Null(line1.Intersect(CreateLine(77.22352473898819, 134.48869782489516, 301.68939728706033, 668.8824171991777)));
            Assert.Equal(new PdfPoint(701.4665906959101, 568.8832457885902), line1.Intersect(CreateLine(901.5364640930612, 586.1527360560148, 94.94810134320741, 516.5302104662884)).Value, PointComparer);
            Assert.Equal(new PdfPoint(624.8437642002289, 636.7719963496312), line1.Intersect(CreateLine(840.591970170414, 12.655883306032845, 553.4055248375457, 843.4284367738792)).Value, PointComparer);
            Assert.Null(line1.Intersect(CreateLine(148.64581345463833, 614.6633416576203, 193.89988447854657, 65.24704638798428)));
            Assert.Null(line1.Intersect(CreateLine(248.17672727909124, 891.7248029485047, 150.20115866146634, 362.0108883103159)));
            Assert.Null(line1.Intersect(CreateLine(261.11174590176444, 8.934250136457877, 924.8114439905122, 273.9827355090374)));
            Assert.Equal(new PdfPoint(796.646895313841, 484.55234527169506), line1.Intersect(CreateLine(935.1255965324843, 690.4339511947389, 727.4037544886379, 381.60590725058927)).Value, PointComparer);
            Assert.Null(line1.Intersect(CreateLine(899.6539927432093, 32.69185179851786, 28.66371660343381, 375.4911653840769)));
            Assert.Equal(new PdfPoint(557.7316315260696, 696.2341572109548), line1.Intersect(CreateLine(843.9300053666182, 993.122304586576, 397.96518279311954, 530.5002840914163)).Value, PointComparer);
            Assert.Null(line1.Intersect(CreateLine(718.0150386321341, 302.8719368347982, 861.1312410432275, 309.755416028656)));
            Assert.Equal(new PdfPoint(724.341934010291, 548.6154150742572), line1.Intersect(CreateLine(745.031278693096, 782.0724737481689, 717.3560143336663, 469.7868062013797)).Value, PointComparer);
            Assert.Null(line1.Intersect(CreateLine(372.19847499219725, 159.9777911218353, 660.279657385527, 473.34232882665015)));
            Assert.Null(line1.Intersect(CreateLine(326.82581111546784, 596.085767017573, 691.8167132271086, 264.08147843750476)));
            Assert.Null(line1.Intersect(CreateLine(818.7414803241093, 714.0401709084665, 891.4704199532238, 194.71346086805286)));
            Assert.Equal(new PdfPoint(671.619900613135, 595.3277740156508), line1.Intersect(CreateLine(21.57423583123652, 743.2422768237401, 975.9390184260003, 526.0815449505143)).Value, PointComparer);
            Assert.Equal(new PdfPoint(326.51596528777543, 901.0940326416946), line1.Intersect(CreateLine(798.5429757903388, 976.1047510758361, 119.10382972392742, 868.1337719904257)).Value, PointComparer);

            var line2 = CreateLine(351.9016935216292, 145.0516312659712, 413.95324499342, 933.7768132428268);
            Assert.Null(line2.Intersect(CreateLine(555.7326061092734, 596.7660607553403, 555.3101952087702, 748.2021066579533)));
            Assert.Null(line2.Intersect(CreateLine(434.9452762531486, 266.16267918746826, 370.0804431002427, 293.10181949672887)));
            Assert.Equal(new PdfPoint(363.27088568715527, 289.5632179546771), line2.Intersect(CreateLine(433.28817736655236, 454.27297566039005, 254.32586010490942, 33.27925814286659)).Value, PointComparer);
            Assert.Null(line2.Intersect(CreateLine(981.7946771114343, 355.3735941891449, 427.31815314210144, 553.1409091609705)));
            Assert.Equal(new PdfPoint(405.2231610165113, 822.8104165929249), line2.Intersect(CreateLine(450.35036850462194, 876.8904008574443, 43.2875505405439, 389.0704798936191)).Value, PointComparer);
            Assert.Equal(new PdfPoint(352.3148117086049, 150.30269605761396), line2.Intersect(CreateLine(335.6394222133249, 147.76920224797973, 754.5140780889623, 211.4088760303502)).Value, PointComparer);
            Assert.Equal(new PdfPoint(407.35672177955183, 849.9296917951381), line2.Intersect(CreateLine(886.3510678872603, 743.3709651600388, 258.90820026432357, 882.9540595190294)).Value, PointComparer);
            Assert.Null(line2.Intersect(CreateLine(699.5324602634907, 30.62029266548705, 438.1893757032378, 185.62504049463791)));
            Assert.Null(line2.Intersect(CreateLine(25.392070482058937, 783.0010773726668, 331.9724385523838, 410.8713863706629)));
            Assert.Equal(new PdfPoint(387.1180119551795, 592.6793940896622), line2.Intersect(CreateLine(127.50002828430095, 559.5543804276867, 608.7796689026322, 620.9615081054184)).Value, PointComparer);
            Assert.Null(line2.Intersect(CreateLine(700.4333788583542, 985.722567203589, 454.4815607496074, 537.8582103267325)));
            Assert.Null(line2.Intersect(CreateLine(695.3025157099005, 973.528879326945, 732.6364581909932, 948.3480610182024)));
            Assert.Null(line2.Intersect(CreateLine(999.8609414071335, 31.331087823489256, 469.11558751712425, 747.562026159229)));
            Assert.Equal(new PdfPoint(378.07370772948497, 477.71900507331543), line2.Intersect(CreateLine(210.82749903103237, 689.8013256401747, 704.8609969023787, 63.325117409769206)).Value, PointComparer);
            Assert.Equal(new PdfPoint(392.2360372608596, 657.7336166648996), line2.Intersect(CreateLine(828.8916324416031, 399.5799314744642, 115.61389583398585, 821.2744621338746)).Value, PointComparer);
            Assert.Null(line2.Intersect(CreateLine(312.9420577971906, 575.7851918030872, 369.1653129430475, 848.5174999834271)));
            Assert.Null(line2.Intersect(CreateLine(994.7168400302381, 218.52516980719062, 602.8188689748915, 547.2309026974548)));
            Assert.Equal(new PdfPoint(381.0876815694553, 516.0290393757577), line2.Intersect(CreateLine(193.64565487779996, 426.0413081120783, 409.2579997731871, 529.5531303647003)).Value, PointComparer);
            Assert.Equal(new PdfPoint(375.6334131353115, 446.70089590095074), line2.Intersect(CreateLine(116.42702680625928, 926.1997854715715, 539.6478715859665, 143.29498135384767)).Value, PointComparer);
            Assert.Null(line2.Intersect(CreateLine(289.3283008851727, 887.2935775850133, 128.73988804916837, 581.7849414489705)));

            var line3 = CreateLine(827.9764299357637, 571.2599298061439, 269.42809761310895, 747.1120897673287);
            Assert.Equal(new PdfPoint(426.2405090926502, 697.7416061912185), line3.Intersect(CreateLine(597.9759520434611, 362.8430619098778, 288.87665225221747, 965.6126693934004)).Value, PointComparer);
            Assert.Equal(new PdfPoint(725.181697687369, 603.623603014767), line3.Intersect(CreateLine(960.6983788833169, 39.57574300958655, 678.827990569521, 714.637859713536)).Value, PointComparer);
            Assert.Null(line3.Intersect(CreateLine(848.441753184245, 226.01218557979473, 961.7117377516282, 851.4119110049194)));
            Assert.Equal(new PdfPoint(513.7162314550305, 670.2009372259705), line3.Intersect(CreateLine(538.0192981290608, 860.805671505451, 442.6036462826098, 112.47727286224085)).Value, PointComparer);
            Assert.Equal(new PdfPoint(436.4187668433915, 694.5371053333131), line3.Intersect(CreateLine(278.34070591188333, 559.6994093955936, 570.5767490067819, 808.9714113968411)).Value, PointComparer);
            Assert.Equal(new PdfPoint(669.0652870832304, 621.2911734700773), line3.Intersect(CreateLine(741.6848820025791, 656.9267581190151, 118.21235604462099, 350.9789213163321)).Value, PointComparer);
            Assert.Null(line3.Intersect(CreateLine(104.85791214848173, 875.2509567504092, 759.847180539203, 335.0494402032118)));
            Assert.Equal(new PdfPoint(560.7507267197575, 655.3926975332802), line3.Intersect(CreateLine(613.226053217281, 723.1667222798209, 194.830706992121, 182.79206543533866)).Value, PointComparer);
            Assert.Equal(new PdfPoint(537.6738790396856, 662.6581628024372), line3.Intersect(CreateLine(764.8077992586041, 874.9326555599533, 146.55306292710125, 297.1250325364575)).Value, PointComparer);
            Assert.Null(line3.Intersect(CreateLine(979.8554501847415, 682.366125605611, 58.09639347344508, 973.545841809009)));
            Assert.Equal(new PdfPoint(532.8647782579247, 664.1722497865072), line3.Intersect(CreateLine(530.470399838713, 701.712690490121, 569.911968144255, 83.32511885506533)).Value, PointComparer);
            Assert.Null(line3.Intersect(CreateLine(949.940584568515, 911.3281295765591, 612.6414591835184, 906.1725686874659)));
            Assert.Null(line3.Intersect(CreateLine(920.5210946321213, 322.83749577186416, 150.72810140776494, 263.9548604802149)));
            Assert.Null(line3.Intersect(CreateLine(867.3018668231659, 414.9718567669486, 704.6924632399761, 257.718843555619)));
            Assert.Null(line3.Intersect(CreateLine(939.1653932965677, 123.18553916850628, 255.76050234694125, 247.3931578409386)));
            Assert.Null(line3.Intersect(CreateLine(529.7116927877873, 228.07257844105567, 827.9533012755296, 362.2625343904694)));
            Assert.Equal(new PdfPoint(533.3919167903337, 664.0062866206387), line3.Intersect(CreateLine(3.5378422551779476, 721.4478307017417, 849.4639656918123, 629.7408777045952)).Value, PointComparer);
            Assert.Null(line3.Intersect(CreateLine(856.5972144347583, 660.3897499193599, 304.52476823723094, 841.7661947036165)));
            Assert.Equal(new PdfPoint(580.7069188830294, 649.1097327593658), line3.Intersect(CreateLine(35.708738123459206, 183.13206057626485, 844.7969349272522, 874.9087450635437)).Value, PointComparer);
            Assert.Null(line3.Intersect(CreateLine(122.32223965238276, 154.29377064067808, 300.48831503480864, 633.3423829686435)));

            var line4 = CreateLine(272.2500658865409, 944.030904393777, 325.8150603620954, 229.21108602064965);
            Assert.Null(line4.Intersect(CreateLine(94.23759482120676, 50.728551251037814, 838.9961530818438, 521.7125228321976)));
            Assert.Null(line4.Intersect(CreateLine(106.17950496328655, 696.4005443937872, 8.81336619921358, 41.91149367532776)));
            Assert.Null(line4.Intersect(CreateLine(500.36065344929915, 882.9094171578315, 961.1482275308962, 318.49086681599016)));
            Assert.Equal(new PdfPoint(312.4491435568774, 407.5779899406437), line4.Intersect(CreateLine(618.2238088991691, 911.4108638928444, 303.3231477545474, 392.5408491506552)).Value, PointComparer);
            Assert.Null(line4.Intersect(CreateLine(281.4082184540746, 979.6282858096472, 913.5382692319204, 311.148978749047)));
            Assert.Null(line4.Intersect(CreateLine(607.4452789874105, 762.9411783229958, 630.3948270457036, 232.28318910839863)));
            Assert.Equal(new PdfPoint(312.93418988326107, 401.10509228942965), line4.Intersect(CreateLine(646.9628855796868, 557.0746028019612, 264.28988842381506, 378.3913913840766)).Value, PointComparer);
            Assert.Equal(new PdfPoint(299.828540789867, 575.9987480495781), line4.Intersect(CreateLine(833.7610711733155, 959.0533757539872, 180.4547011098937, 490.3573999125411)).Value, PointComparer);
            Assert.Equal(new PdfPoint(301.0292352778426, 559.9755929233689), line4.Intersect(CreateLine(449.1882948826826, 259.4417252863588, 291.156845084154, 580.0012843366668)).Value, PointComparer);
            Assert.Null(line4.Intersect(CreateLine(806.7141902274523, 92.17984347609298, 262.0311941394193, 229.6055538350278)));
            Assert.Equal(new PdfPoint(312.7290679628452, 403.84242504436787), line4.Intersect(CreateLine(682.2466893745454, 367.58972005929877, 94.70399650815587, 425.232470164812)).Value, PointComparer);
            Assert.Equal(new PdfPoint(311.23767814165194, 423.7448820789783), line4.Intersect(CreateLine(515.039723816646, 688.7989508153315, 218.33672413501725, 302.9228571214113)).Value, PointComparer);
            Assert.Null(line4.Intersect(CreateLine(969.4708245146627, 900.3068255154104, 918.9397260374807, 773.5705288854887)));
            Assert.Null(line4.Intersect(CreateLine(496.0627957884615, 447.9146019160819, 924.7464937982644, 959.2278477114312)));
            Assert.Equal(new PdfPoint(315.0270907385083, 373.1755270226291), line4.Intersect(CreateLine(137.57066459141853, 407.0475468535213, 370.2785910543763, 362.6293892747946)).Value, PointComparer);
            Assert.Equal(new PdfPoint(294.48887005559953, 647.2561522892688), line4.Intersect(CreateLine(715.6460182852811, 510.63316418211866, 20.73076328900536, 736.0630281127584)).Value, PointComparer);
            Assert.Null(line4.Intersect(CreateLine(835.8448024941904, 894.8049031463455, 556.4752433721656, 882.0142333548768)));
            Assert.Null(line4.Intersect(CreateLine(498.53009731811073, 811.6398668764998, 951.9489332295883, 866.4765330457532)));
            Assert.Null(line4.Intersect(CreateLine(533.9099241171612, 448.8008734479916, 986.9261524363459, 494.81790954688154)));
            Assert.Equal(new PdfPoint(288.97653073783704, 720.8178025519654), line4.Intersect(CreateLine(795.5467166283111, 728.7305691796133, 258.36414851796087, 720.3396286618134)).Value, PointComparer);
        }

        [Fact]
        public void Contains()
        {
            var line = CreateLine(10, 7.5d, 26.3d, 12);
            Assert.False(line.Contains(new PdfPoint(5, 2)));
            Assert.False(line.Contains(new PdfPoint(5, 6.11963190184049d)));
            Assert.False(line.Contains(new PdfPoint(27, 12.1932515337423d)));
            Assert.False(line.Contains(new PdfPoint(12, 15)));
            Assert.False(line.Contains(new PdfPoint(10, 12)));
            Assert.True(line.Contains(new PdfPoint(20, 10.260736196319d)));
            Assert.True(line.Contains(new PdfPoint(10, 7.5d)));

            var verticalLine = CreateLine(10, 7.5d, 10, 15);
            Assert.False(verticalLine.Contains(new PdfPoint(5, 2)));
            Assert.False(verticalLine.Contains(new PdfPoint(12, 15)));
            Assert.False(verticalLine.Contains(new PdfPoint(10, 16)));
            Assert.False(verticalLine.Contains(new PdfPoint(10, 7)));
            Assert.True(verticalLine.Contains(new PdfPoint(10, 12)));
            Assert.True(verticalLine.Contains(new PdfPoint(10, 7.5d)));

            var horizontalLine = CreateLine(10, 7.5d, 26.3d, 7.5d);
            Assert.False(horizontalLine.Contains(new PdfPoint(5, 2)));
            Assert.False(horizontalLine.Contains(new PdfPoint(5, 7.5)));
            Assert.False(horizontalLine.Contains(new PdfPoint(27, 7.5)));
            Assert.False(horizontalLine.Contains(new PdfPoint(10, 12)));
            Assert.True(horizontalLine.Contains(new PdfPoint(20, 7.5)));
            Assert.True(horizontalLine.Contains(new PdfPoint(26.3d, 7.5d)));

            var line0 = CreateLine(438.3865838366066, 609.9902140686454, 944.7309188382663, 876.9348433851213);
            Assert.False(line0.Contains(new PdfPoint(634.4822834192046, 309.61126869152156)));
            Assert.False(line0.Contains(new PdfPoint(513.4378559485833, 941.0769848202681)));
            Assert.False(line0.Contains(new PdfPoint(965.1109446991279, 329.09245612574057)));
            Assert.False(line0.Contains(new PdfPoint(820.7095483378824, 525.358685774857)));
            Assert.False(line0.Contains(new PdfPoint(990.8069634112412, 663.5926568025885)));
            Assert.True(line0.Contains(new PdfPoint(438.3865838366066, 609.9902140686454)));
            Assert.True(line0.Contains(new PdfPoint(944.7309188382663, 876.9348433851213)));

            var line1 = CreateLine(934.3159494382417, 759.5192678221186, 260.0914555582554, 754.853110870852);
            Assert.False(line1.Contains(new PdfPoint(214.39243948924536, 717.9615854355675)));
            Assert.False(line1.Contains(new PdfPoint(602.2787326566985, 662.8585244372948)));
            Assert.False(line1.Contains(new PdfPoint(658.3394804169986, 73.36850324595979)));
            Assert.False(line1.Contains(new PdfPoint(166.68617796663375, 846.1564716027135)));
            Assert.False(line1.Contains(new PdfPoint(477.03683917749896, 725.7599348603968)));
            Assert.True(line1.Contains(new PdfPoint(934.3159494382417, 759.5192678221186)));
            Assert.True(line1.Contains(new PdfPoint(260.0914555582554, 754.853110870852)));

            var line2 = CreateLine(459.5236361336371, 225.75275035034105, 243.6017422524196, 577.1870942626915);
            Assert.False(line2.Contains(new PdfPoint(138.46035708111393, 612.611020472454)));
            Assert.True(line2.Contains(new PdfPoint(372.028832661666, 368.15923957290966)));
            Assert.False(line2.Contains(new PdfPoint(174.3062607282675, 246.10768796449022)));
            Assert.True(line2.Contains(new PdfPoint(407.3009997733987, 310.75028171105555)));
            Assert.False(line2.Contains(new PdfPoint(413.5520960352509, 831.4966615594723)));
            Assert.True(line2.Contains(new PdfPoint(331.59996792967223, 433.96123536322784)));
            Assert.False(line2.Contains(new PdfPoint(507.311911158632, 878.2547755917843)));
            Assert.False(line2.Contains(new PdfPoint(30.25648083800045, 924.4277127301796)));
            Assert.False(line2.Contains(new PdfPoint(494.504688420875, 372.0094967104417)));
            Assert.True(line2.Contains(new PdfPoint(403.89590870792, 316.2924058701583)));
            Assert.True(line2.Contains(new PdfPoint(459.5236361336371, 225.75275035034105)));
            Assert.True(line2.Contains(new PdfPoint(243.6017422524196, 577.1870942626915)));

            var line3 = CreateLine(509.21323774187186, 888.044377235812, 47.37833742875941, 849.8318450594651);
            Assert.False(line3.Contains(new PdfPoint(678.2233054557167, 546.1624886001035)));
            Assert.True(line3.Contains(new PdfPoint(480.660341056732, 885.6818912422912)));
            Assert.False(line3.Contains(new PdfPoint(506.5932134253688, 110.51265720847093)));
            Assert.True(line3.Contains(new PdfPoint(437.25072258310075, 882.0901500344223)));
            Assert.False(line3.Contains(new PdfPoint(109.31452757193073, 294.37842228373967)));
            Assert.True(line3.Contains(new PdfPoint(476.2526479351329, 885.3171957307168)));
            Assert.False(line3.Contains(new PdfPoint(740.0033114463812, 982.64467663726)));
            Assert.True(line3.Contains(new PdfPoint(88.91977913129028, 853.2690120570946)));
            Assert.False(line3.Contains(new PdfPoint(681.4728580543268, 760.6227653385002)));
            Assert.True(line3.Contains(new PdfPoint(490.18925240056944, 886.4703198151103)));
            Assert.True(line3.Contains(new PdfPoint(509.21323774187186, 888.044377235812)));
            Assert.True(line3.Contains(new PdfPoint(47.37833742875941, 849.8318450594651)));

            var line4 = CreateLine(405.58207740586516, 672.608614731411, 207.25519576774244, 970.4807982580487);
            Assert.False(line4.Contains(new PdfPoint(392.6618359714601, 96.47934589520469)));
            Assert.True(line4.Contains(new PdfPoint(309.7610862024394, 816.5245964767958)));
            Assert.False(line4.Contains(new PdfPoint(845.9946332716904, 418.6201620546748)));
            Assert.True(line4.Contains(new PdfPoint(280.8428236740471, 859.9576698553517)));
            Assert.False(line4.Contains(new PdfPoint(889.4514788109458, 672.0134606355084)));
            Assert.True(line4.Contains(new PdfPoint(320.58916899950924, 800.2616237545421)));
            Assert.False(line4.Contains(new PdfPoint(985.5749855832817, 486.8777325651764)));
            Assert.False(line4.Contains(new PdfPoint(172.58499465406223, 1022.5528543693492)));
            Assert.False(line4.Contains(new PdfPoint(936.4162971004565, 620.0608255800965)));
            Assert.True(line4.Contains(new PdfPoint(336.6230951431535, 776.1798626162473)));
            Assert.True(line4.Contains(new PdfPoint(405.58207740586516, 672.608614731411)));
            Assert.True(line4.Contains(new PdfPoint(207.25519576774244, 970.4807982580487)));

            var line5 = CreateLine(435.3238347493861, 795.9122229139125, 732.5503121192992, 908.7240131737507);
            Assert.False(line5.Contains(new PdfPoint(547.4436930896966, 559.6385871353319)));
            Assert.False(line5.Contains(new PdfPoint(13.874097858707657, 635.9517115089891)));
            Assert.False(line5.Contains(new PdfPoint(826.9938262230233, 989.6274928609377)));
            Assert.False(line5.Contains(new PdfPoint(118.97238757058906, 675.8415837725852)));
            Assert.False(line5.Contains(new PdfPoint(232.50406167656078, 813.870814739484)));
            Assert.False(line5.Contains(new PdfPoint(29.09641985978787, 641.7293172325747)));
            Assert.False(line5.Contains(new PdfPoint(312.0559485367265, 438.7925410762308)));
            Assert.False(line5.Contains(new PdfPoint(109.7704752533478, 672.3490140274272)));
            Assert.False(line5.Contains(new PdfPoint(82.60913058985109, 752.1433892591745)));
            Assert.False(line5.Contains(new PdfPoint(50.992247634205874, 650.0398404144613)));
            Assert.True(line5.Contains(new PdfPoint(435.3238347493861, 795.9122229139125)));
            Assert.True(line5.Contains(new PdfPoint(732.5503121192992, 908.7240131737507)));
        }

        [Fact]
        public void ParallelTo()
        {
            // TO DO: IMPROVE

            var verticalLine1 = CreateLine(10, 7.5d, 10, 15);
            var verticalLine2 = CreateLine(200, 0, 200, 551.5467d);
            var horizontalLine1 = CreateLine(10, 7.5d, 26.3d, 7.5d);
            var horizontalLine2 = CreateLine(27, 57, 200.9999872d, 57);
            var obliqueLine1 = CreateLine(10, 7.5d, 26.3d, 12);
            var obliqueLine2 = CreateLine(60, 28.8036809815951d, 40, 23.2822085889571d);

            Assert.True(verticalLine1.ParallelTo(verticalLine2));
            Assert.True(verticalLine2.ParallelTo(verticalLine1));

            Assert.False(obliqueLine1.ParallelTo(verticalLine2));
            Assert.False(verticalLine2.ParallelTo(obliqueLine1));

            Assert.False(obliqueLine1.ParallelTo(verticalLine1));
            Assert.False(verticalLine1.ParallelTo(obliqueLine1));

            Assert.True(horizontalLine1.ParallelTo(horizontalLine2));
            Assert.True(horizontalLine2.ParallelTo(horizontalLine1));

            Assert.False(obliqueLine1.ParallelTo(horizontalLine1));
            Assert.False(horizontalLine1.ParallelTo(obliqueLine1));

            Assert.False(obliqueLine1.ParallelTo(horizontalLine2));
            Assert.False(horizontalLine2.ParallelTo(obliqueLine1));

            Assert.False(verticalLine1.ParallelTo(horizontalLine2));
            Assert.False(horizontalLine2.ParallelTo(verticalLine1));

            Assert.False(verticalLine2.ParallelTo(horizontalLine2));
            Assert.False(horizontalLine2.ParallelTo(verticalLine2));

            Assert.True(obliqueLine1.ParallelTo(obliqueLine2));
            Assert.True(obliqueLine2.ParallelTo(obliqueLine1));
        }
    }
}
